{"cells":[{"cell_type":"markdown","metadata":{"id":"MR-ZUzHrnzxD"},"source":["# Housing analytic file\n","## Sandra Tilmon\n","## 6/26/2023\n","\n","\n","#### Change log:\n","Date        Change\n"]},{"cell_type":"markdown","metadata":{"id":"TvFmvEHiPj4Q"},"source":["# Setup"]},{"cell_type":"code","execution_count":1,"metadata":{"id":"btWvzOPRfEYF","executionInfo":{"status":"ok","timestamp":1727122175507,"user_tz":300,"elapsed":5096,"user":{"displayName":"Sandra Tilmon","userId":"02128196715661756059"}}},"outputs":[],"source":["import pandas as pd\n","import numpy as np\n","\n","# Utilities\n","import math\n","import os\n","import re\n","from functools import reduce\n","import requests\n","from timeit import default_timer as timer\n","\n","# Viz\n","import matplotlib\n","import matplotlib.pyplot as plt\n","import seaborn as sns\n","\n","import scipy.stats\n","\n","# GIS\n","import geopandas as gpd\n","from shapely.geometry import shape, Point\n","import geopy\n","from geopy.extra.rate_limiter import RateLimiter\n","from geopy import geocoders\n","from geopy.geocoders import GoogleV3\n","\n","pd.set_option('display.max_rows', None)\n","pd.set_option('display.max_columns', None)\n","pd.set_option('display.width', None)\n","\n","# No scientific notation\n","pd.options.display.float_format = '{:.2f}'.format\n","\n","%matplotlib inline"]},{"cell_type":"code","execution_count":2,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":24553,"status":"ok","timestamp":1727122200058,"user":{"displayName":"Sandra Tilmon","userId":"02128196715661756059"},"user_tz":300},"id":"yFaDBPZ8h85t","outputId":"72cef4d4-444c-4d90-a13a-779a3f2cfba2"},"outputs":[{"output_type":"stream","name":"stdout","text":["Mounted at /content/gdrive\n"]}],"source":["# Mount drive\n","\n","from google.colab import drive\n","drive.mount('/content/gdrive')"]},{"cell_type":"code","execution_count":3,"metadata":{"id":"pb3e7cfSh88a","executionInfo":{"status":"ok","timestamp":1727122200058,"user_tz":300,"elapsed":3,"user":{"displayName":"Sandra Tilmon","userId":"02128196715661756059"}}},"outputs":[],"source":["# Raw data sources\n","dir = '/content/gdrive/My Drive/Sociome_Folder/Data/'\n","\n","# Output curated datasets\n","curated = '/content/gdrive/My Drive/Sociome_Folder/Data Commons/Curated datasets/'"]},{"cell_type":"code","execution_count":4,"metadata":{"id":"QDL07PEznCVi","executionInfo":{"status":"ok","timestamp":1727122200058,"user_tz":300,"elapsed":2,"user":{"displayName":"Sandra Tilmon","userId":"02128196715661756059"}}},"outputs":[],"source":["# Empty list to collect dataframe names\n","\n","frames = []"]},{"cell_type":"markdown","metadata":{"id":"q-FSkUKY1CP9"},"source":["# GIS"]},{"cell_type":"markdown","metadata":{"id":"HzfmglqK-PGy"},"source":["## Set CRS"]},{"cell_type":"code","execution_count":5,"metadata":{"id":"QAsNvSGr-QJO","executionInfo":{"status":"ok","timestamp":1727122200058,"user_tz":300,"elapsed":2,"user":{"displayName":"Sandra Tilmon","userId":"02128196715661756059"}}},"outputs":[],"source":["crs = {'init' :'epsg:3435'}"]},{"cell_type":"markdown","metadata":{"id":"h97N1NUiBzf3"},"source":["## Census tract\n","\n","data source\n","\n","https://data.cityofchicago.org/Facilities-Geographic-Boundaries/Boundaries-Census-Tracts-2010/5jrd-6zik"]},{"cell_type":"code","execution_count":null,"metadata":{"executionInfo":{"elapsed":3047,"status":"ok","timestamp":1726682589060,"user":{"displayName":"Sandra Tilmon","userId":"02128196715661756059"},"user_tz":300},"id":"QYqmv1HF-md3","colab":{"base_uri":"https://localhost:8080/"},"outputId":"0cb6397a-478a-4b01-fb00-30cd3866082a"},"outputs":[{"output_type":"stream","name":"stderr","text":["/usr/local/lib/python3.10/dist-packages/pyproj/crs/crs.py:141: FutureWarning: '+init=<authority>:<code>' syntax is deprecated. '<authority>:<code>' is the preferred initialization method. When making the change, be mindful of axis order changes: https://pyproj4.github.io/pyproj/stable/gotchas.html#axis-order-changes-in-proj-6\n","  in_crs_string = _prepare_from_proj_string(in_crs_string)\n"]}],"source":["# Census tracts - API\n","\n","r = requests.get(\"https://data.cityofchicago.org/resource/74p9-q2aq.json\")\n","r.raise_for_status()\n","\n","data = r.json()\n","for d in data:\n","    d['the_geom'] = shape(d['the_geom'])\n","\n","tracts_shp = gpd.GeoDataFrame(data).set_geometry('the_geom', crs=crs)\n","\n","tracts_shp = tracts_shp.drop(columns=['statefp10', 'countyfp10', 'tractce10',\t'name10', 'namelsad10',\n","                                      'notes'])"]},{"cell_type":"code","execution_count":6,"metadata":{"id":"HFfei5eD4Vvq","executionInfo":{"status":"ok","timestamp":1727122204581,"user_tz":300,"elapsed":4525,"user":{"displayName":"Sandra Tilmon","userId":"02128196715661756059"}}},"outputs":[],"source":["# Reload dataframe\n","\n","tractsdf = pd.read_csv(dir + \"1 Chicago datamart/tracts.csv\")\n","\n","frames.append('tractsdf')"]},{"cell_type":"markdown","metadata":{"id":"RHW-yjPvmlI4"},"source":["## Functions"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"anLMOmMmmmAb"},"outputs":[],"source":["# Lat/long coordinates to census tract\n","\n","def LatLongTract(infile, lat, long):\n","\n","  # establish lat/long point geometry\n","  geometry = [Point(xy) for xy in zip(infile[long], infile[lat])]\n","\n","  # Make a geo dataframe, set CRS\n","  gdf = gpd.GeoDataFrame(infile, geometry=geometry)\n","  gdf = gdf.set_crs(crs)\n","\n","  # Intersect lat/long points and census tract\n","  result=gpd.sjoin(gdf, tracts_shp, how='left', op='within')\n","\n","  result.drop(columns=['index_right'], inplace=True)\n","\n","  # Standardize census tract GEOID to uppercase throughout notebooks\n","  result.rename(columns={\"geoid10\" : \"GEOID10\"}, inplace=True)\n","  return(result)\n","\n","\n","\n","# One line street address to lat/long coordinates and then census tract\n","\n","def AddLatLongTract(infile):\n","\n","  # Create \"oneline\" address in cleaning each dataset to something like:\n","  # \"123 N Main Street Chicago, IL 60000\"\n","  # Field names and structure vary so not bothering trying to integrate here.\n","\n","  g = geocoders.GoogleV3(api_key='')\n","\n","  def Gv3_latlong (address):\n","      location = g.geocode(address)\n","      lat = location.latitude\n","      long = location.longitude\n","      # Perform additional steps to obtain census tract from coordinates\n","      # census_tract = get_census_tract_from_coordinates(latitude, longitude)\n","      return lat, long, location\n","\n","  infile[['lat', 'long', 'Location']] = infile['oneline'].apply(Gv3_latlong).apply(pd.Series)\n","\n","  # establish lat/long point geometry\n","  geometry = [Point(xy) for xy in zip(infile['long'], infile['lat'])]\n","\n","  # Make a geo dataframe, set CRS\n","  gdf = gpd.GeoDataFrame(infile, geometry=geometry)\n","  gdf = gdf.set_crs(crs)\n","\n","  # Intersect lat/long points and census tract\n","  result=gpd.sjoin(gdf, tracts_shp, how='left', op='within')\n","\n","  result.drop(columns=['index_right'], inplace=True)\n","\n","  # Standardize census tract GEOID10 to uppercase throughout notebooks\n","  result.rename(columns={\"geoid10\" : \"GEOID10\"}, inplace=True)\n","  return(result)"]},{"cell_type":"markdown","source":["# Import and limit national data"],"metadata":{"id":"9oWUjFLU7aIw"}},{"cell_type":"code","source":["# Reload\n","natl = pd.read_csv(curated + \"00060_Housing_national.csv\")\n","\n","natl = pd.merge(tractsdf, natl, on='GEOID10', how='left')\n","\n","frames.append('natl')"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"E9HKyq2U7cO2","executionInfo":{"status":"ok","timestamp":1727122213966,"user_tz":300,"elapsed":9387,"user":{"displayName":"Sandra Tilmon","userId":"02128196715661756059"}},"outputId":"97b4602d-e2ce-457b-f30c-f618c3e70e5d"},"execution_count":7,"outputs":[{"output_type":"stream","name":"stderr","text":["<ipython-input-7-3406c0378122>:2: DtypeWarning: Columns (4,7,10,13) have mixed types. Specify dtype option on import or set low_memory=False.\n","  natl = pd.read_csv(curated + \"00060_Housing_national.csv\")\n"]}]},{"cell_type":"markdown","source":["# ACS denominators"],"metadata":{"id":"FC3mfWNz8lsf"}},{"cell_type":"code","source":["acs1014 = pd.read_csv(dir + \"ACS/2016 Planning Database/pdb2016trv8_us.csv\", encoding='latin-1')\n","acs1014['Years'] = '2010-2014'\n","# Limit to Cook County\n","acs1014 = acs1014[(acs1014['State']==17) & (acs1014['County']==31)]\n","# Rename\n","acs1014 = acs1014.rename(columns={'Tot_Housing_Units_ACS_10_14':'Tot_Housing_Units_ACS'})\n","\n","\n","acs1519 = pd.read_csv(dir + \"ACS/2021 Planning Database/pdb2021trv3_us.csv\", encoding='latin-1')\n","acs1519['Years'] = '2015-2019'\n","\n","# Limit to Cook County for speed\n","acs1519 = acs1519[(acs1519['State']==17) & (acs1519['County']==31)]\n","# Rename\n","acs1519 = acs1519.rename(columns={'Tot_Housing_Units_ACS_15_19':'Tot_Housing_Units_ACS'})"],"metadata":{"id":"Az6rz4JH8ozO","colab":{"base_uri":"https://localhost:8080/","height":436},"executionInfo":{"status":"error","timestamp":1726682597666,"user_tz":300,"elapsed":4,"user":{"displayName":"Sandra Tilmon","userId":"02128196715661756059"}},"outputId":"b054642e-a341-4d7a-dc7b-2e33f67f7bf0"},"execution_count":null,"outputs":[{"output_type":"error","ename":"FileNotFoundError","evalue":"[Errno 2] No such file or directory: '/content/gdrive/My Drive/Sociome_Folder/Data/ACS/2016 Planning Database/pdb2016trv8_us.csv'","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mFileNotFoundError\u001b[0m                         Traceback (most recent call last)","\u001b[0;32m<ipython-input-9-198b097c79ad>\u001b[0m in \u001b[0;36m<cell line: 1>\u001b[0;34m()\u001b[0m\n\u001b[0;32m----> 1\u001b[0;31m \u001b[0macs1014\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mpd\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mread_csv\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mdir\u001b[0m \u001b[0;34m+\u001b[0m \u001b[0;34m\"ACS/2016 Planning Database/pdb2016trv8_us.csv\"\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mencoding\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0;34m'latin-1'\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m      2\u001b[0m \u001b[0macs1014\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;34m'Years'\u001b[0m\u001b[0;34m]\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0;34m'2010-2014'\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m      3\u001b[0m \u001b[0;31m# Limit to Cook County\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m      4\u001b[0m \u001b[0macs1014\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0macs1014\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0macs1014\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;34m'State'\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m==\u001b[0m\u001b[0;36m17\u001b[0m\u001b[0;34m)\u001b[0m \u001b[0;34m&\u001b[0m \u001b[0;34m(\u001b[0m\u001b[0macs1014\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;34m'County'\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m==\u001b[0m\u001b[0;36m31\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m      5\u001b[0m \u001b[0;31m# Rename\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;32m/usr/local/lib/python3.10/dist-packages/pandas/io/parsers/readers.py\u001b[0m in \u001b[0;36mread_csv\u001b[0;34m(filepath_or_buffer, sep, delimiter, header, names, index_col, usecols, dtype, engine, converters, true_values, false_values, skipinitialspace, skiprows, skipfooter, nrows, na_values, keep_default_na, na_filter, verbose, skip_blank_lines, parse_dates, infer_datetime_format, keep_date_col, date_parser, date_format, dayfirst, cache_dates, iterator, chunksize, compression, thousands, decimal, lineterminator, quotechar, quoting, doublequote, escapechar, comment, encoding, encoding_errors, dialect, on_bad_lines, delim_whitespace, low_memory, memory_map, float_precision, storage_options, dtype_backend)\u001b[0m\n\u001b[1;32m    946\u001b[0m     \u001b[0mkwds\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mupdate\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mkwds_defaults\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    947\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m--> 948\u001b[0;31m     \u001b[0;32mreturn\u001b[0m \u001b[0m_read\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mfilepath_or_buffer\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mkwds\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m    949\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    950\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;32m/usr/local/lib/python3.10/dist-packages/pandas/io/parsers/readers.py\u001b[0m in \u001b[0;36m_read\u001b[0;34m(filepath_or_buffer, kwds)\u001b[0m\n\u001b[1;32m    609\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    610\u001b[0m     \u001b[0;31m# Create the parser.\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m--> 611\u001b[0;31m     \u001b[0mparser\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mTextFileReader\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mfilepath_or_buffer\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;34m**\u001b[0m\u001b[0mkwds\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m    612\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    613\u001b[0m     \u001b[0;32mif\u001b[0m \u001b[0mchunksize\u001b[0m \u001b[0;32mor\u001b[0m \u001b[0miterator\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;32m/usr/local/lib/python3.10/dist-packages/pandas/io/parsers/readers.py\u001b[0m in \u001b[0;36m__init__\u001b[0;34m(self, f, engine, **kwds)\u001b[0m\n\u001b[1;32m   1446\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m   1447\u001b[0m         \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mhandles\u001b[0m\u001b[0;34m:\u001b[0m \u001b[0mIOHandles\u001b[0m \u001b[0;34m|\u001b[0m \u001b[0;32mNone\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0;32mNone\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m-> 1448\u001b[0;31m         \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0m_engine\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0m_make_engine\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mf\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mself\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mengine\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m   1449\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m   1450\u001b[0m     \u001b[0;32mdef\u001b[0m \u001b[0mclose\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mself\u001b[0m\u001b[0;34m)\u001b[0m \u001b[0;34m->\u001b[0m \u001b[0;32mNone\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;32m/usr/local/lib/python3.10/dist-packages/pandas/io/parsers/readers.py\u001b[0m in \u001b[0;36m_make_engine\u001b[0;34m(self, f, engine)\u001b[0m\n\u001b[1;32m   1703\u001b[0m                 \u001b[0;32mif\u001b[0m \u001b[0;34m\"b\"\u001b[0m \u001b[0;32mnot\u001b[0m \u001b[0;32min\u001b[0m \u001b[0mmode\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m   1704\u001b[0m                     \u001b[0mmode\u001b[0m \u001b[0;34m+=\u001b[0m \u001b[0;34m\"b\"\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m-> 1705\u001b[0;31m             self.handles = get_handle(\n\u001b[0m\u001b[1;32m   1706\u001b[0m                 \u001b[0mf\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m   1707\u001b[0m                 \u001b[0mmode\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;32m/usr/local/lib/python3.10/dist-packages/pandas/io/common.py\u001b[0m in \u001b[0;36mget_handle\u001b[0;34m(path_or_buf, mode, encoding, compression, memory_map, is_text, errors, storage_options)\u001b[0m\n\u001b[1;32m    861\u001b[0m         \u001b[0;32mif\u001b[0m \u001b[0mioargs\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mencoding\u001b[0m \u001b[0;32mand\u001b[0m \u001b[0;34m\"b\"\u001b[0m \u001b[0;32mnot\u001b[0m \u001b[0;32min\u001b[0m \u001b[0mioargs\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mmode\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    862\u001b[0m             \u001b[0;31m# Encoding\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m--> 863\u001b[0;31m             handle = open(\n\u001b[0m\u001b[1;32m    864\u001b[0m                 \u001b[0mhandle\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    865\u001b[0m                 \u001b[0mioargs\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mmode\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;31mFileNotFoundError\u001b[0m: [Errno 2] No such file or directory: '/content/gdrive/My Drive/Sociome_Folder/Data/ACS/2016 Planning Database/pdb2016trv8_us.csv'"]}]},{"cell_type":"markdown","metadata":{"id":"6HPaGmBwoP-P"},"source":["# 1 Chicago datamart"]},{"cell_type":"markdown","metadata":{"id":"kRaL620XdB2h"},"source":["## Building code violations -- reload\n","\n","https://data.cityofchicago.org/Buildings/Building-Violations/22u3-xenr/about_data"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"XTNBXi5iibsh"},"outputs":[],"source":["viol = pd.read_csv(dir + \"1 Chicago datamart/Building violations/Building_Violations.csv\",\n","                      encoding='latin-1', low_memory=False)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"SLBprOVq1j3u"},"outputs":[],"source":["viol.drop(columns= ['SSA', 'VIOLATION STATUS DATE', 'VIOLATION LOCATION'],\n","          inplace=True)\n","\n","viol['date'] = pd.to_datetime(viol['VIOLATION DATE'])\n","\n","viol['year'] = viol['date'].dt.year\n","viol['month'] = viol['date'].dt.month\n","\n","viol2 = viol[(viol['year'] > 2009)]"]},{"cell_type":"markdown","metadata":{"id":"UUo-IzmSCJe5"},"source":["### GIS and census tract"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"zAvyX8bvyhaz"},"outputs":[],"source":["# Map geometry for lat/long\n","\n","geometry = [Point(xy) for xy in zip(viol2['LONGITUDE'], viol2['LATITUDE'])]\n","\n","# Make a geo dataframe and set the crs\n","gdf = gpd.GeoDataFrame(viol2, geometry=geometry)\n","gdf = gdf.set_crs(crs)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"UihkFHxrCPzv","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1718652575207,"user_tz":300,"elapsed":5459,"user":{"displayName":"Evan Hart","userId":"09923212880057092266"}},"outputId":"d1315f70-dc4d-4521-801e-bf20ef650b08"},"outputs":[{"output_type":"stream","name":"stderr","text":["/usr/local/lib/python3.10/dist-packages/IPython/core/interactiveshell.py:3473: FutureWarning: The `op` parameter is deprecated and will be removed in a future release. Please use the `predicate` parameter instead.\n","  if (await self.run_code(code, result,  async_=asy)):\n"]}],"source":["# Intersect violations and census tract\n","\n","result=gpd.sjoin(gdf, tracts_shp, how='left', op='within')"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"uAFV161ACgPF"},"outputs":[],"source":["result.drop(columns=['index_right', 'VIOLATION DATE'], inplace=True)\n","result.rename(columns={\"geoid10\" : \"GEOID10\"}, inplace=True)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"vxvm33Pxnz3S"},"outputs":[],"source":["countY = result.groupby(\n","    ['GEOID10', 'year']).size().reset_index(name='ViolCount')"]},{"cell_type":"markdown","metadata":{"id":"okOODqwoqIdm"},"source":["### Make bldg violation rate"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"dUY_uqvun_B5"},"outputs":[],"source":["ACS1014_HU = acs1014[['GIDTR', 'Years', 'Tot_Housing_Units_ACS']]\n","ACS1519_HU = acs1519[['GIDTR', 'Years', 'Tot_Housing_Units_ACS']]\n","\n","dataframes = [ACS1014_HU, ACS1519_HU]\n","\n","ACS_Housing = pd.concat(dataframes, ignore_index=True)\n","ACS_Housing = ACS_Housing.rename(columns={'GIDTR':'GEOID10'})\n","ACS_Housing = ACS_Housing.drop_duplicates()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"C-dGSGVVqK6T"},"outputs":[],"source":["countY['Years'] =  np.where(countY['year'] >= 2010, \"2010-2014\", \"2015-2019\" )\n","countY['Years'] =  np.where(countY['year'] >= 2015, \"2015-2019\", countY['Years'] )\n","\n","countY['GEOID10'] = countY['GEOID10'].astype(str).astype(int)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"nObDF3UEtIGs"},"outputs":[],"source":["total_merge = countY.merge(ACS_Housing, on=['GEOID10', 'Years'], how='left', indicator=True)\n","\n","total_merge = total_merge.drop(columns=\"_merge\")\n","\n","total_merge['BldgViolRate1000'] = round(\n","    total_merge['ViolCount'] / total_merge['Tot_Housing_Units_ACS'] * 1000, 2\n","    )\n","\n","total_merge.rename(columns={'Years':'ACSYears'}, inplace=True)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"IhDKpajGogQF"},"outputs":[],"source":["violY = total_merge\n","\n","violTract = violY.groupby('GEOID10')[\n","    'BldgViolRate1000'].mean().round(2).reset_index(name='BldgViolRate1000')"]},{"cell_type":"markdown","metadata":{"id":"e6AoiWH3EbE-"},"source":["### Export and reload"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"qSW-qC9OqrTN"},"outputs":[],"source":["# Line listing\n","with open(dir + '1 Chicago datamart/Building violations/bldg_viol_tract_1023.csv', 'w') as f:\n","  result.to_csv(f)\n","\n","# Tract, year counts with RATES\n","with open(dir + '1 Chicago datamart/Building violations/bldg_viol_tract_Year_1023_RATES.csv', 'w') as f:\n","  violY.to_csv(f)\n","\n","# Tract only\n","with open(dir + '1 Chicago datamart/Building violations/bldg_viol_tract_1023_RATES.csv', 'w') as f:\n","  violTract.to_csv(f)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"Oy3HEBRYdbpD"},"outputs":[],"source":["# Reload\n","\n","bldgviol = pd.read_csv(dir + '1 Chicago datamart/Building violations/bldg_viol_tract_1023_RATES.csv')\n","bldgviol = bldgviol.drop(columns=[\"Unnamed: 0\"])\n","\n","frames.append('bldgviol')"]},{"cell_type":"markdown","metadata":{"id":"XVPhewWeFBAu"},"source":["# ChiVes -- reload\n","\n","https://chichives.com/\n","\n","Chives data inspection occurred in 61 pollution and environment"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"4BlcdV5fFNA0"},"outputs":[],"source":["chives = pd.read_csv(dir +\n","                     '1 Chicago datamart/ChiVes/chives-data-minusNU.csv',\n","                     dtype='string')\n","\n","chives.rename(columns={'geoid':'GEOID10',\n","                       'pop_density (sq.mi.)':'pop_density_sqmi'},\n","              inplace=True)\n","\n","c = ['proportionA', 'proportionB', 'proportionC', 'proportionD', 'proportionCorD',\n","     'primary_grade_4levels',\t'primary_grade_3levels']\n","\n","# Recode non-redlined areas from null to \"0\"\n","chives[c] = chives[c].fillna('0')\n","\n","cols = chives.columns"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"uj7rOdmUJsf1"},"outputs":[],"source":["# Cost burden obtained from original source below so removed from ChiVes\n","\n","# Overcrowding obtained from original source below so removed from ChiVes\n","\n","ChivesHousing = chives[['GEOID10', 'zip_code', 'commarea_n', 'community',\n","                        'HPRICETIER', 'median_rent', 'median_home_value',\n","                        'pop_density_sqmi',\n","                        'hardship',\n","                        'city_property_tot', 'prop_comm', 'prop_plndev',\n","                        'prop_resdntl',\n","                        'urban_flood_suscep',\n","                        'proportionA', 'proportionB', 'proportionC', 'proportionD', 'proportionCorD',\n","                        'primary_grade_4levels',\t'primary_grade_3levels'\n","                  ]]"]},{"cell_type":"markdown","metadata":{"id":"lyxIRc8TCy8a"},"source":["## Export and reload"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"hoMfGXU3KM02"},"outputs":[],"source":["# Export\n","\n","with open(dir + '1 Chicago datamart/ChiVes/ChivesHousing.csv', 'w') as f:\n","  ChivesHousing.to_csv(f)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"mdhIhtGfKI5j"},"outputs":[],"source":["# Reload Chives housing\n","\n","ChivesHousing = pd.read_csv(dir + '1 Chicago datamart/ChiVes/ChivesHousing.csv')\n","ChivesHousing.drop(columns=['Unnamed: 0'], inplace=True)\n","\n","ChivesHousing['GEOID10'] = ChivesHousing['GEOID10'].astype(np.float64)\n","\n","frames.append('ChivesHousing')"]},{"cell_type":"markdown","metadata":{"id":"d2QY4aE9oGj8"},"source":["# Cook County Assessor -- reload\n","\n","https://www.cookcountyassessor.com/\n","\n","Sanjay Krishnan's housing file, sourced from the Cook County Assessor's office\n","\n","Repair indicators are 35% MISSING"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"hgaye9Okh9Bg"},"outputs":[],"source":["housing = pd.read_csv(dir +\n","                      \"2023-03-10 Housing quality copy Sanjay/Copy of chicago-assessments.csv\",\n","                      encoding='latin-1', low_memory=False)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"V4F9HYxER8ED"},"outputs":[],"source":["# Drop NULL columns\n","\n","housing2 = housing.dropna(axis=1, how='all')"]},{"cell_type":"markdown","metadata":{"id":"j5cgs9_UTEdj"},"source":["Modeled variables mostly constants - remove."]},{"cell_type":"code","execution_count":null,"metadata":{"id":"Gjcyh__BS_vd"},"outputs":[],"source":["housing2 = housing2[housing2.columns.drop(list(housing2.filter(regex='Modeled')))]"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"mykj5J0qeCSb"},"outputs":[],"source":["housing2['Township Name'] =  housing2['Township Name'].astype(str)\n","\n","# Get the mode of these:\n","cols_mode = ['Property Class', 'Township Name', 'Township Code', 'Neighborhood Code', 'Township Neighborhood Only']\n","\n","new_cols_mode = [f\"mode_{col}\" for col in cols_mode]\n","\n","# Get the average of these:\n","cols_mean = ['Proportion Assessed', 'Age', 'Road Proximity 101 - 300 Feet', \"O'Hare Noise Indicator\",\n","             'FEMA Floodplain', 'Flood Risk Factor', 'Flood Risk Direction', 'Road Proximity < 100 Feet',\n","             'Road Proximity 101 - 300 Feet', 'Tax Rate', 'Tract Median Income']\n","\n","new_cols_mean = [f\"avg_{col}\" for col in cols_mean]\n","\n","oldcols = cols_mode + cols_mean\n","newcols = new_cols_mode + new_cols_mean"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"uB4NUys_fq_K"},"outputs":[],"source":["agg_dict = {\n","    **{col: 'mean' for col in cols_mean},  # Calculate mean for numeric columns\n","}\n","\n","# Group by 'Tract GEOID' and perform aggregate functions for mean columns\n","result = df.groupby('Tract GEOID').agg(agg_dict).reset_index()\n","\n","def calculate_mode(x):\n","    return x.mode().iloc[0] if not x.empty else None\n","\n","mode_values = df.groupby('Tract GEOID')[cols_mode].agg(calculate_mode).reset_index()\n","\n","housing3 = pd.merge(result, mode_values, on='Tract GEOID')"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"9lVFSU4dg4d1"},"outputs":[],"source":["# Create a mapping between original names and new names\n","rename_mapping = {orig_name: new_name for orig_name, new_name in zip(oldcols, newcols)}\n","\n","# Rename columns in the DataFrame using the mapping\n","housing3 = housing3.rename(columns=rename_mapping)"]},{"cell_type":"markdown","metadata":{"id":"r6XCzQKlD0pI"},"source":["#### Export and reload"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"0cEb3hxkDydy"},"outputs":[],"source":["# Export line listings\n","\n","housing2.rename(columns={\"Tract GEOID\" : \"GEOID10\"}, inplace=True)\n","with open(dir + \"/2023-03-10 Housing quality copy Sanjay/2023-12-08_housing_line.csv\", 'w') as f:\n","  housing2.to_csv(f)\n","\n","\n","# Export tract averages\n","\n","housing3.rename(columns={\"Tract GEOID\" : \"GEOID10\"}, inplace=True)\n","with open(dir + \"/2023-03-10 Housing quality copy Sanjay/2023-12-08_housing_tract_agg.csv\", 'w') as f:\n","  housing3.to_csv(f)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"PNgGVXpKDwq_"},"outputs":[],"source":["# Reload\n","\n","housingAgg = pd.read_csv(dir + \"2023-03-10 Housing quality copy Sanjay/2023-12-08_housing_tract_agg.csv\")\n","housingAgg.drop(columns=['Unnamed: 0', 'mode_Property Class',\n","                         'mode_Township Name', 'mode_Township Code',\n","                         'mode_Neighborhood Code', 'mode_Township Neighborhood Only'],\n","                inplace=True)\n","housingAgg.rename(columns={\"Tract GEOID\" : \"GEOID10\"}, inplace=True)\n","\n","frames.append('housingAgg')"]},{"cell_type":"markdown","metadata":{"id":"AD2qG1DVdPU3"},"source":["# Cook County Data Portal -- reload"]},{"cell_type":"markdown","metadata":{"id":"0j0YKfnAeBuM"},"source":["## Foreclosures\n","\n","https://datacatalog.cookcountyil.gov/resource/nk2q-7kjv"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"StKMBlhrr1rU"},"outputs":[],"source":["# Downloaded\n","\n","fore = pd.read_csv(dir + '1 Chicago datamart/Cook County/Cook_County_Recorder_-_Foreclosures_-_2013_through_March_27__2015.csv')\n","fore['oneline'] = fore['Street'] + ' ' + fore['City'] + ' ' + fore['State'] + ' ' + fore['Zip code']\n","fore['date'] = pd.to_datetime(fore['Recorded Date'])\n","fore['year'] = fore['date'].dt.year\n","\n","# No street address, no geocoding possible, so dropping those records\n","fore = fore.dropna(subset=['Street'])"]},{"cell_type":"markdown","metadata":{"id":"vS3nidtstTYM"},"source":["### GIS\n","def AddLatLongTract(infile):"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"CYaTdvP7tUhj"},"outputs":[],"source":["fore2 = AddLatLongTract(fore)"]},{"cell_type":"markdown","source":["### Move to DeGauss"],"metadata":{"id":"WYR7l7ZhDqCm"}},{"cell_type":"code","source":["fore['Zip'] = fore['Zip code'].str[:5]\n","fore['address'] = fore['Street'] + ' ' + fore['City'] + ' ' + fore['State'] + ' ' + fore['Zip']\n","\n","degauss = fore[['PIN', 'Document Number', 'address']]\n","\n","# Export to DeGauss\n","with open(dir + '1 Chicago datamart/Cook County/foreclosure_to_degauss.csv', 'w') as f:\n","  degauss.to_csv(f)"],"metadata":{"id":"6AQt5JrFDs2A"},"execution_count":null,"outputs":[]},{"cell_type":"code","execution_count":null,"metadata":{"id":"uhD3_DtIYrlX"},"outputs":[],"source":["# Bring back from DeGauss\n","\n","fore1 = pd.read_csv(dir +\n","                    '1 Chicago datamart/Cook County/foreclosure_to_degauss_geocoded_v3.0.csv')"]},{"cell_type":"code","source":["# def LatLongTract(infile, lat, long):\n","\n","fore2 = LatLongTract(fore1, \"lat\", \"lon\")"],"metadata":{"id":"na4I1_lr0fOQ"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["# Backup geocode\n","\n","with open(dir + '1 Chicago datamart/Cook County/foreclosure_full_geo_backup.csv', 'w') as f:\n","  fore2.to_csv(f)"],"metadata":{"id":"oNaTTQTa1Hvz"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["# Merge back to details\n","\n","fore3 = fore.merge(fore2, on=['PIN', 'Document Number'], indicator=True)"],"metadata":{"id":"vWm1Jpjy1a5-"},"execution_count":null,"outputs":[]},{"cell_type":"markdown","metadata":{"id":"OOAXyjButjJz"},"source":["### Make rates"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"JqTuD9nbuBKU"},"outputs":[],"source":["foreY = fore3.groupby(['GEOID10', 'year']).size().reset_index(\n","    name='ForeCount')\n","\n","foreY['Years'] =  np.where(foreY['year'] >= 2010, \"2010-2014\", \"2015-2019\" )\n","foreY['Years'] =  np.where(foreY['year'] >= 2015, \"2015-2019\",  foreY['Years'] )\n","\n","foreY['GEOID10'] = foreY['GEOID10'].astype(str).astype(int)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"UqBL5StWtUqn"},"outputs":[],"source":["total_merge = foreY.merge(ACS_Housing, on=['GEOID10', 'Years'], how='left')\n","\n","total_merge['ForecloseRate1000'] = round(\n","    total_merge['ForeCount'] / total_merge['Tot_Housing_Units_ACS'] * 1000, 2)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"P7iEiFJvtUtx"},"outputs":[],"source":["total_merge['ForecloseRate1000'] = round(\n","    total_merge['ForeCount'] / total_merge['Tot_Housing_Units_ACS'] * 1000, 2)\n","\n","total_merge = total_merge.rename(columns={'Years':'ACSYears'})"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"ZR9o2O_7tUwt"},"outputs":[],"source":["foreTract = foreY.groupby('GEOID10')[\n","    'ForecloseRate1000'].mean().round(2).reset_index(name='ForecloseRate1000')"]},{"cell_type":"markdown","metadata":{"id":"g9AqN0hxutJ3"},"source":["### Export and reload"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"ESdaoJ5DtUzl"},"outputs":[],"source":["# Line listing\n","with open(dir + '1 Chicago datamart/Cook County/foreclosure_tract_line.csv', 'w') as f:\n","  fore3.to_csv(f)\n","\n","# Tract, year counts with RATES\n","with open(dir + '1 Chicago datamart/Cook County/foreclosure_tract_year_RATES.csv', 'w') as f:\n","  foreY.to_csv(f)\n","\n","# Tract only\n","with open(dir + '1 Chicago datamart/Cook County/foreclosure_tract_RATES.csv', 'w') as f:\n","  foreTract.to_csv(f)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"mQpk7yqqvJkQ"},"outputs":[],"source":["# Reload\n","\n","fore = pd.read_csv(dir + '1 Chicago datamart/Cook County/foreclosure_tract_RATES.csv')\n","fore = fore.drop(columns=['Unnamed: 0'])\n","\n","frames.append('fore')"]},{"cell_type":"markdown","metadata":{"id":"o2lcmXcBsyVK"},"source":["# Law Ctr Better Housing\n"]},{"cell_type":"markdown","metadata":{"id":"BU01ogECdKTH"},"source":["## Evictions\n","\n","https://lcbh.org/about-us/#evictions-data-portal\n","\n","dictionary: https://drive.google.com/file/d/1u8eVFlMsB_nIkmEBympSnTRxx-BUuqNN/view?usp=sharing"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"ejC4L9GPc3Wv"},"outputs":[],"source":["evict = pd.read_csv(dir + 'Law Ctr Better Housing/Chicago-Evictions-data-Release-1-2019May16/eviction_data_tract.csv')\n","\n","evict = evict.rename(columns={'tract': 'GEOID10'})"]},{"cell_type":"markdown","metadata":{"id":"sMzjyklMRC1B"},"source":["### Summarize years by tract"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"lkVXEY9k2oL5"},"outputs":[],"source":["evict_avg = evict.groupby(['GEOID10'])[\n","    'eviction_filings_rate'].mean().reset_index()"]},{"cell_type":"markdown","metadata":{"id":"zQaj8kVhRa9L"},"source":["### Export and reload"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"-b8s2vXnReNm"},"outputs":[],"source":["# Tract only\n","with open(dir + 'Law Ctr Better Housing/Tract_averages.csv', 'w') as f:\n","  evict_avg.to_csv(f)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"Xq1YkDxRReTe"},"outputs":[],"source":["# Reload\n","\n","evict = pd.read_csv(dir + 'Law Ctr Better Housing/Tract_averages.csv')\n","evict.drop(columns=['Unnamed: 0'], inplace=True)\n","\n","frames.append('evict')"]},{"cell_type":"markdown","metadata":{"id":"RJVs_qsVgwFS"},"source":["# Merge"]},{"cell_type":"code","source":["# Loop through each frames and check if 'GEOID10' exists\n","for frame in frames:\n","    df = globals()[frame]\n","\n","    # Check if 'GEOID10' is a column\n","    if 'GEOID10' in df.columns:\n","        print(f\"'GEOID10' found in {frame}\")\n","    else:\n","        print(f\"'GEOID10' not found in {frame}\")"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"KWQkUcicbVqf","executionInfo":{"status":"ok","timestamp":1726684848113,"user_tz":300,"elapsed":150,"user":{"displayName":"Sandra Tilmon","userId":"02128196715661756059"}},"outputId":"de325810-1553-4865-9e00-6bc02821fb92"},"execution_count":null,"outputs":[{"output_type":"stream","name":"stdout","text":["'GEOID10' found in tractsdf\n","'GEOID10' found in natl\n","'GEOID10' found in bldgviol\n","'GEOID10' found in ChivesHousing\n","'GEOID10' found in housingAgg\n","'GEOID10' found in fore\n","'GEOID10' found in evict\n"]}]},{"cell_type":"code","execution_count":null,"metadata":{"id":"-s2Peq9jcTS6"},"outputs":[],"source":["tractsdf['GEOID10'] = pd.to_numeric(tractsdf['GEOID10'], errors='coerce')\n","\n","# Convert 'GEOID10' in all DataFrames to uppercase and numeric\n","for df_name in frames:\n","  # Convert 'GEOID10' to uppercase and numeric\n","  globals()[df_name]['GEOID10'] = globals()[df_name]['GEOID10'].astype(str).str.upper()\n","  # tractsdf['GEOID10'] = tractsdf['GEOID10'].astype(str).str.upper()\n","  globals()[df_name]['GEOID10'] = pd.to_numeric(globals()[df_name]['GEOID10'], errors='coerce')"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"LJlxrWUycTVz"},"outputs":[],"source":["# Merge all DataFrames on 'GEOID10'\n","\n","merged_df = tractsdf\n","\n","for df_name in frames:\n","    if df_name != 'tractsdf':\n","        merged_df = pd.merge(merged_df, globals()[df_name], on='GEOID10', how='outer')"]},{"cell_type":"markdown","source":["# Add clusters"],"metadata":{"id":"TkFC3XccerD0"}},{"cell_type":"code","source":["filenames = ['bldg_viol_7_clus.csv', 'flood_6_clus.csv',\n","             'foreclose_4_clus.csv', 'house_age_4q_clus.csv',\n","             'pre1960_8_clus.csv', 'Prob30_3q_clus.csv',\n","             'Prob50_4_clus.csv', 'Crowding_4_clus.csv',\n","             'evic_3_clus.csv']\n","\n","dfs = []\n","\n","# Importing and cleaning each CSV file\n","for filename in filenames:\n","    df = pd.read_csv(dir + filename)\n","\n","    # Remove \"Unnamed: 0\" column if present\n","    if 'Unnamed: 0' in df.columns:\n","        df.drop(columns=['Unnamed: 0'], inplace=True)\n","\n","    # Convert GEOID10 to int\n","    if 'GEOID10' in df.columns:\n","        df['GEOID10'] = df['GEOID10'].astype(int)\n","\n","    # Append cleaned dataframe to list\n","    dfs.append(df)\n","\n","# Merge dataframes on GEOID10\n","merged_df2 = pd.concat(dfs, ignore_index=True).groupby('GEOID10').sum()\n","merged_df2 = merged_df2.reset_index()"],"metadata":{"id":"RBkvtPpnesla"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["merged_df = pd.merge(merged_df, merged_df2, on='GEOID10', how='outer')\n","merged_df.drop(columns=['Unnamed: 0'], inplace=True)\n","merged_df.head()"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":348},"id":"dGxppsUhcAaG","executionInfo":{"status":"ok","timestamp":1726684929578,"user_tz":300,"elapsed":333,"user":{"displayName":"Sandra Tilmon","userId":"02128196715661756059"}},"outputId":"1fcc25c4-f069-4305-ef09-b114f388cbd1"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["       GEOID10  Bldg_loss_rate  Bldg_loss_rate_pctile Bldg_loss_rate_ge90pct_lowinc  \\\n","0  17031842400            0.01                  31.00                         False   \n","1  17031840300            0.01                  31.00                         False   \n","2  17031841100            0.01                  42.00                         False   \n","3  17031841200            0.01                  31.00                         False   \n","4  17031839000            0.01                  37.00                         False   \n","\n","   Housing_burden_pct  Housing_burden_pctile Housing_burden_ge90pct_lowinc  Lead_pre1960  \\\n","0               39.00                  86.00                         False         66.00   \n","1               38.00                  84.00                         False         78.00   \n","2               39.00                  85.00                         False         21.00   \n","3               35.00                  80.00                         False         82.00   \n","4               15.00                  23.00                         False         27.00   \n","\n","   Lead_pre1960_pctile Lead_ge90pct_value_lt90pct_lowinc  Energy_bdn  Energy_bdn_pctile  \\\n","0                86.00                             False        5.00              88.00   \n","1                93.00                              True        3.00              54.00   \n","2                46.00                             False        3.00              57.00   \n","3                95.00                              True        3.00              52.00   \n","4                53.00                             False        0.00               0.00   \n","\n","  Energy_bdn_pctile_lowinc  HFL_BOTTLED GAS  HFL_COAL  HFL_ELECTRICITY  HFL_FUEL OIL  HFL_NONE  \\\n","0                    False            70.00      0.00           180.00          0.00      0.00   \n","1                    False             0.00      0.00           170.00          0.00      0.00   \n","2                    False             0.00      0.00           315.00          0.00    180.00   \n","3                    False             0.00      0.00           140.00          0.00      0.00   \n","4                    False            95.00      0.00           185.00          0.00    185.00   \n","\n","   HFL_OTHER  HFL_SOLAR  HFL_UTILITY GAS  HFL_WOOD  YBL6_1940-59  YBL6_1960-79  YBL6_1980-99  \\\n","0       0.00       0.00           180.00      0.00        135.00        105.00         30.00   \n","1       0.00       0.00           170.00      0.00         60.00         80.00         40.00   \n","2       0.00       0.00           315.00      0.00         95.00        140.00        200.00   \n","3       0.00       0.00           140.00      0.00         50.00         50.00         70.00   \n","4      90.00       0.00           185.00      0.00        100.00        200.00        180.00   \n","\n","   YBL6_2000-09  YBL6_2010  YBL6_BEFORE 1940  FPL15_0-100  FPL15_100-150  FPL15_150-200  \\\n","0         20.00      30.00            110.00        86.00          86.00          86.00   \n","1         40.00      20.00            100.00        68.00          68.00          68.00   \n","2        115.00      70.00            190.00       162.00         162.00         162.00   \n","3         30.00       0.00             80.00        56.00          56.00          56.00   \n","4        100.00      40.00            120.00       148.00         148.00         148.00   \n","\n","   FPL15_200-400  FPL15_400  UNITS  HINCP_UNITS  ELEP_UNITS  GASP_UNITS  FULP_UNITS   ELEP  \\\n","0          86.00      86.00   2.91    140456.57     3044.67     4127.79       20.22 903.37   \n","1          68.00      68.00   3.56    239496.99     2833.02     4457.50       19.38 760.24   \n","2         162.00     162.00   3.44    150448.86     1983.74     2637.75       17.47 668.60   \n","3          56.00      56.00   6.11    349170.58     4233.79     6083.96        2.42 853.65   \n","4         148.00     148.00   6.47    869506.12     4048.61     1440.10        6.48 587.79   \n","\n","     GASP  FULP  OwnerOccPct  RenterOccPct  ProbOwner30pct  ProbRenter30pct  ProbALL30pct  \\\n","0 1032.50  6.06        66.00         34.00           20.00            58.00         33.00   \n","1 1051.15  2.84        71.00         29.00           30.00            45.00         34.00   \n","2  940.56  2.57        43.00         57.00           44.00            40.00         42.00   \n","3  866.92  0.16        19.00         81.00           43.00            35.00         37.00   \n","4  263.39  3.95        32.00         68.00           29.00            38.00         35.00   \n","\n","   OwnerPre1960pct  RentPre1960pct  AllPre1960pct  HCV_PUBLIC_PCT  UAHB_COUNT  FUND_DHB_AMT  \\\n","0            82.00           53.00          72.00           17.21        2.00      20000.00   \n","1            55.00           67.00          59.00             NaN        2.00       8365.00   \n","2            28.00           21.00          24.00            1.53         NaN           NaN   \n","3            75.00           77.00          77.00             NaN         NaN           NaN   \n","4            54.00           14.00          26.00            1.61         NaN           NaN   \n","\n","   UAHOR_COUNT  FUND_DHOR_AMT  RENTAL_COUNT  RENTAL_AMT  OTHER_COUNT  OTHER_AMT  TOTAL_COUNT  \\\n","0         0.00           0.00          0.00        0.00         2.00   20000.00         2.00   \n","1         0.00           0.00          0.00        0.00         2.00    8365.00         2.00   \n","2          NaN            NaN           NaN         NaN          NaN        NaN          NaN   \n","3          NaN            NaN           NaN         NaN          NaN        NaN          NaN   \n","4          NaN            NaN           NaN         NaN          NaN        NaN          NaN   \n","\n","   TOTAL_AMT  UATOTHOA_COUNT  UATOTHOA_AMT  avg_NSP3NEED  avg_PCT_LMMI  avg_PCT_LM  avg_HC_RATE  \\\n","0   20000.00            2.00      20000.00           NaN           NaN         NaN          NaN   \n","1    8365.00            2.00       8365.00           NaN           NaN         NaN          NaN   \n","2        NaN             NaN           NaN           NaN           NaN         NaN          NaN   \n","3        NaN             NaN           NaN           NaN           NaN         NaN          NaN   \n","4        NaN             NaN           NaN           NaN           NaN         NaN          NaN   \n","\n","   avg_SDQ_RATE  USPS_VAC_pct  USPS_NS_pct  HMDA_pct  fore_STARTS_pct  fore_REO_pct  \\\n","0           NaN           NaN          NaN       NaN              NaN           NaN   \n","1           NaN           NaN          NaN       NaN              NaN           NaN   \n","2           NaN           NaN          NaN       NaN              NaN           NaN   \n","3           NaN           NaN          NaN       NaN              NaN           NaN   \n","4           NaN           NaN          NaN       NaN              NaN           NaN   \n","\n","   sum_IMPACT_pct  PubHousCount  TOTAL_DWELLING_UNITS  TOTAL_OCCUPIED  PubHousOcc_pct  \\\n","0             NaN           NaN                   NaN             NaN             NaN   \n","1             NaN          4.00                  7.00            6.00            0.86   \n","2             NaN          5.00                 23.00            6.00            0.26   \n","3             NaN         12.00                 41.00           36.00            0.88   \n","4             NaN           NaN                   NaN             NaN             NaN   \n","\n","   BldgViolRate1000  zip_code  commarea_n        community     HPRICETIER  median_rent  \\\n","0            110.03  60619.00       44.00          CHATHAM     lower_cost      1031.00   \n","1             90.53  60608.00       59.00    MCKINLEY PARK  moderate_cost       930.00   \n","2             82.55  60616.00       34.00    ARMOUR SQUARE      high_cost       800.00   \n","3             96.50  60608.00       31.00  LOWER WEST SIDE  moderate_cost       924.00   \n","4             16.58  60605.00       32.00             LOOP      high_cost      2074.00   \n","\n","   median_home_value  pop_density_sqmi  hardship  city_property_tot  prop_comm  prop_plndev  \\\n","0          139600.00           4098.29     27.60              40.00       4.00         0.00   \n","1          216100.00          12067.21     21.80               8.00       3.00         0.00   \n","2          284200.00          16392.80     37.60              13.00       6.00         6.00   \n","3          183600.00          20039.69     22.70               0.00       0.00         0.00   \n","4          277500.00          46867.73     18.40               0.00       0.00         0.00   \n","\n","   prop_resdntl  urban_flood_suscep  proportionA  proportionB  proportionC  proportionD  \\\n","0         36.00                9.50         0.00         0.00         0.00         0.00   \n","1          5.00                9.40         0.00         0.00         0.01         0.75   \n","2          1.00                9.20         0.00         0.00         0.00         0.71   \n","3          0.00                9.20         0.00         0.00         0.00         0.65   \n","4          0.00                9.60         0.00         0.00         0.00         0.00   \n","\n","   proportionCorD primary_grade_4levels primary_grade_3levels  avg_Proportion Assessed  avg_Age  \\\n","0            0.00                     0                     0                     0.99    82.71   \n","1            0.76                     D                    CD                     0.98    91.02   \n","2            0.71                     D                    CD                     0.47    41.95   \n","3            0.65                     D                    CD                     0.98   122.18   \n","4            0.00                     0                     0                     0.01    63.06   \n","\n","   avg_Road Proximity 101 - 300 Feet  avg_O'Hare Noise Indicator  avg_FEMA Floodplain  \\\n","0                               0.16                        0.00                 0.00   \n","1                               0.25                        0.00                 0.00   \n","2                               0.27                        0.00                 0.00   \n","3                               0.16                        0.00                 0.00   \n","4                               0.00                        0.00                 0.00   \n","\n","   avg_Flood Risk Factor  avg_Flood Risk Direction  avg_Road Proximity < 100 Feet  avg_Tax Rate  \\\n","0                   1.93                      0.24                           0.01          6.91   \n","1                   2.51                      0.11                           0.02          6.92   \n","2                   2.01                      0.17                           0.10          6.89   \n","3                   1.00                      0.00                           0.04          6.89   \n","4                   6.00                      0.01                           0.00          6.89   \n","\n","   avg_Tract Median Income  ForecloseRate1000  eviction_filings_rate  viol_7_clus  flood_6_clus  \\\n","0                 39097.00               9.43                   5.50         5.00          5.00   \n","1                 48622.00               8.45                   3.11         5.00          5.00   \n","2                 30676.00               0.69                   0.79         5.00          0.00   \n","3                 44336.00               5.42                   2.31         5.00          0.00   \n","4                102188.00               1.49                   3.96         3.00          4.00   \n","\n","   foreclose_4_clus  house_age_4q_clus  pre1960_8_clus  Prob30_3q_clus  Prob50_4_clus  \\\n","0              1.00               0.00            0.00            0.00           0.00   \n","1              0.00               2.00            0.00            2.00           0.00   \n","2              1.00               3.00            5.00            2.00           0.00   \n","3              0.00               2.00            3.00            2.00           0.00   \n","4              1.00               3.00            5.00            2.00           0.00   \n","\n","   Crowding_4_clus  evic_3_clus  \n","0             0.00         1.00  \n","1             1.00         0.00  \n","2             0.00         0.00  \n","3             1.00         0.00  \n","4             0.00         0.00  "],"text/html":["\n","  <div id=\"df-0ed1fc78-3bd5-4350-90fc-a62025160971\" class=\"colab-df-container\">\n","    <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>GEOID10</th>\n","      <th>Bldg_loss_rate</th>\n","      <th>Bldg_loss_rate_pctile</th>\n","      <th>Bldg_loss_rate_ge90pct_lowinc</th>\n","      <th>Housing_burden_pct</th>\n","      <th>Housing_burden_pctile</th>\n","      <th>Housing_burden_ge90pct_lowinc</th>\n","      <th>Lead_pre1960</th>\n","      <th>Lead_pre1960_pctile</th>\n","      <th>Lead_ge90pct_value_lt90pct_lowinc</th>\n","      <th>Energy_bdn</th>\n","      <th>Energy_bdn_pctile</th>\n","      <th>Energy_bdn_pctile_lowinc</th>\n","      <th>HFL_BOTTLED GAS</th>\n","      <th>HFL_COAL</th>\n","      <th>HFL_ELECTRICITY</th>\n","      <th>HFL_FUEL OIL</th>\n","      <th>HFL_NONE</th>\n","      <th>HFL_OTHER</th>\n","      <th>HFL_SOLAR</th>\n","      <th>HFL_UTILITY GAS</th>\n","      <th>HFL_WOOD</th>\n","      <th>YBL6_1940-59</th>\n","      <th>YBL6_1960-79</th>\n","      <th>YBL6_1980-99</th>\n","      <th>YBL6_2000-09</th>\n","      <th>YBL6_2010</th>\n","      <th>YBL6_BEFORE 1940</th>\n","      <th>FPL15_0-100</th>\n","      <th>FPL15_100-150</th>\n","      <th>FPL15_150-200</th>\n","      <th>FPL15_200-400</th>\n","      <th>FPL15_400</th>\n","      <th>UNITS</th>\n","      <th>HINCP_UNITS</th>\n","      <th>ELEP_UNITS</th>\n","      <th>GASP_UNITS</th>\n","      <th>FULP_UNITS</th>\n","      <th>ELEP</th>\n","      <th>GASP</th>\n","      <th>FULP</th>\n","      <th>OwnerOccPct</th>\n","      <th>RenterOccPct</th>\n","      <th>ProbOwner30pct</th>\n","      <th>ProbRenter30pct</th>\n","      <th>ProbALL30pct</th>\n","      <th>OwnerPre1960pct</th>\n","      <th>RentPre1960pct</th>\n","      <th>AllPre1960pct</th>\n","      <th>HCV_PUBLIC_PCT</th>\n","      <th>UAHB_COUNT</th>\n","      <th>FUND_DHB_AMT</th>\n","      <th>UAHOR_COUNT</th>\n","      <th>FUND_DHOR_AMT</th>\n","      <th>RENTAL_COUNT</th>\n","      <th>RENTAL_AMT</th>\n","      <th>OTHER_COUNT</th>\n","      <th>OTHER_AMT</th>\n","      <th>TOTAL_COUNT</th>\n","      <th>TOTAL_AMT</th>\n","      <th>UATOTHOA_COUNT</th>\n","      <th>UATOTHOA_AMT</th>\n","      <th>avg_NSP3NEED</th>\n","      <th>avg_PCT_LMMI</th>\n","      <th>avg_PCT_LM</th>\n","      <th>avg_HC_RATE</th>\n","      <th>avg_SDQ_RATE</th>\n","      <th>USPS_VAC_pct</th>\n","      <th>USPS_NS_pct</th>\n","      <th>HMDA_pct</th>\n","      <th>fore_STARTS_pct</th>\n","      <th>fore_REO_pct</th>\n","      <th>sum_IMPACT_pct</th>\n","      <th>PubHousCount</th>\n","      <th>TOTAL_DWELLING_UNITS</th>\n","      <th>TOTAL_OCCUPIED</th>\n","      <th>PubHousOcc_pct</th>\n","      <th>BldgViolRate1000</th>\n","      <th>zip_code</th>\n","      <th>commarea_n</th>\n","      <th>community</th>\n","      <th>HPRICETIER</th>\n","      <th>median_rent</th>\n","      <th>median_home_value</th>\n","      <th>pop_density_sqmi</th>\n","      <th>hardship</th>\n","      <th>city_property_tot</th>\n","      <th>prop_comm</th>\n","      <th>prop_plndev</th>\n","      <th>prop_resdntl</th>\n","      <th>urban_flood_suscep</th>\n","      <th>proportionA</th>\n","      <th>proportionB</th>\n","      <th>proportionC</th>\n","      <th>proportionD</th>\n","      <th>proportionCorD</th>\n","      <th>primary_grade_4levels</th>\n","      <th>primary_grade_3levels</th>\n","      <th>avg_Proportion Assessed</th>\n","      <th>avg_Age</th>\n","      <th>avg_Road Proximity 101 - 300 Feet</th>\n","      <th>avg_O'Hare Noise Indicator</th>\n","      <th>avg_FEMA Floodplain</th>\n","      <th>avg_Flood Risk Factor</th>\n","      <th>avg_Flood Risk Direction</th>\n","      <th>avg_Road Proximity &lt; 100 Feet</th>\n","      <th>avg_Tax Rate</th>\n","      <th>avg_Tract Median Income</th>\n","      <th>ForecloseRate1000</th>\n","      <th>eviction_filings_rate</th>\n","      <th>viol_7_clus</th>\n","      <th>flood_6_clus</th>\n","      <th>foreclose_4_clus</th>\n","      <th>house_age_4q_clus</th>\n","      <th>pre1960_8_clus</th>\n","      <th>Prob30_3q_clus</th>\n","      <th>Prob50_4_clus</th>\n","      <th>Crowding_4_clus</th>\n","      <th>evic_3_clus</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>17031842400</td>\n","      <td>0.01</td>\n","      <td>31.00</td>\n","      <td>False</td>\n","      <td>39.00</td>\n","      <td>86.00</td>\n","      <td>False</td>\n","      <td>66.00</td>\n","      <td>86.00</td>\n","      <td>False</td>\n","      <td>5.00</td>\n","      <td>88.00</td>\n","      <td>False</td>\n","      <td>70.00</td>\n","      <td>0.00</td>\n","      <td>180.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>180.00</td>\n","      <td>0.00</td>\n","      <td>135.00</td>\n","      <td>105.00</td>\n","      <td>30.00</td>\n","      <td>20.00</td>\n","      <td>30.00</td>\n","      <td>110.00</td>\n","      <td>86.00</td>\n","      <td>86.00</td>\n","      <td>86.00</td>\n","      <td>86.00</td>\n","      <td>86.00</td>\n","      <td>2.91</td>\n","      <td>140456.57</td>\n","      <td>3044.67</td>\n","      <td>4127.79</td>\n","      <td>20.22</td>\n","      <td>903.37</td>\n","      <td>1032.50</td>\n","      <td>6.06</td>\n","      <td>66.00</td>\n","      <td>34.00</td>\n","      <td>20.00</td>\n","      <td>58.00</td>\n","      <td>33.00</td>\n","      <td>82.00</td>\n","      <td>53.00</td>\n","      <td>72.00</td>\n","      <td>17.21</td>\n","      <td>2.00</td>\n","      <td>20000.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>2.00</td>\n","      <td>20000.00</td>\n","      <td>2.00</td>\n","      <td>20000.00</td>\n","      <td>2.00</td>\n","      <td>20000.00</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>110.03</td>\n","      <td>60619.00</td>\n","      <td>44.00</td>\n","      <td>CHATHAM</td>\n","      <td>lower_cost</td>\n","      <td>1031.00</td>\n","      <td>139600.00</td>\n","      <td>4098.29</td>\n","      <td>27.60</td>\n","      <td>40.00</td>\n","      <td>4.00</td>\n","      <td>0.00</td>\n","      <td>36.00</td>\n","      <td>9.50</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0</td>\n","      <td>0</td>\n","      <td>0.99</td>\n","      <td>82.71</td>\n","      <td>0.16</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>1.93</td>\n","      <td>0.24</td>\n","      <td>0.01</td>\n","      <td>6.91</td>\n","      <td>39097.00</td>\n","      <td>9.43</td>\n","      <td>5.50</td>\n","      <td>5.00</td>\n","      <td>5.00</td>\n","      <td>1.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>1.00</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>17031840300</td>\n","      <td>0.01</td>\n","      <td>31.00</td>\n","      <td>False</td>\n","      <td>38.00</td>\n","      <td>84.00</td>\n","      <td>False</td>\n","      <td>78.00</td>\n","      <td>93.00</td>\n","      <td>True</td>\n","      <td>3.00</td>\n","      <td>54.00</td>\n","      <td>False</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>170.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>170.00</td>\n","      <td>0.00</td>\n","      <td>60.00</td>\n","      <td>80.00</td>\n","      <td>40.00</td>\n","      <td>40.00</td>\n","      <td>20.00</td>\n","      <td>100.00</td>\n","      <td>68.00</td>\n","      <td>68.00</td>\n","      <td>68.00</td>\n","      <td>68.00</td>\n","      <td>68.00</td>\n","      <td>3.56</td>\n","      <td>239496.99</td>\n","      <td>2833.02</td>\n","      <td>4457.50</td>\n","      <td>19.38</td>\n","      <td>760.24</td>\n","      <td>1051.15</td>\n","      <td>2.84</td>\n","      <td>71.00</td>\n","      <td>29.00</td>\n","      <td>30.00</td>\n","      <td>45.00</td>\n","      <td>34.00</td>\n","      <td>55.00</td>\n","      <td>67.00</td>\n","      <td>59.00</td>\n","      <td>NaN</td>\n","      <td>2.00</td>\n","      <td>8365.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>2.00</td>\n","      <td>8365.00</td>\n","      <td>2.00</td>\n","      <td>8365.00</td>\n","      <td>2.00</td>\n","      <td>8365.00</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>4.00</td>\n","      <td>7.00</td>\n","      <td>6.00</td>\n","      <td>0.86</td>\n","      <td>90.53</td>\n","      <td>60608.00</td>\n","      <td>59.00</td>\n","      <td>MCKINLEY PARK</td>\n","      <td>moderate_cost</td>\n","      <td>930.00</td>\n","      <td>216100.00</td>\n","      <td>12067.21</td>\n","      <td>21.80</td>\n","      <td>8.00</td>\n","      <td>3.00</td>\n","      <td>0.00</td>\n","      <td>5.00</td>\n","      <td>9.40</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.01</td>\n","      <td>0.75</td>\n","      <td>0.76</td>\n","      <td>D</td>\n","      <td>CD</td>\n","      <td>0.98</td>\n","      <td>91.02</td>\n","      <td>0.25</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>2.51</td>\n","      <td>0.11</td>\n","      <td>0.02</td>\n","      <td>6.92</td>\n","      <td>48622.00</td>\n","      <td>8.45</td>\n","      <td>3.11</td>\n","      <td>5.00</td>\n","      <td>5.00</td>\n","      <td>0.00</td>\n","      <td>2.00</td>\n","      <td>0.00</td>\n","      <td>2.00</td>\n","      <td>0.00</td>\n","      <td>1.00</td>\n","      <td>0.00</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>17031841100</td>\n","      <td>0.01</td>\n","      <td>42.00</td>\n","      <td>False</td>\n","      <td>39.00</td>\n","      <td>85.00</td>\n","      <td>False</td>\n","      <td>21.00</td>\n","      <td>46.00</td>\n","      <td>False</td>\n","      <td>3.00</td>\n","      <td>57.00</td>\n","      <td>False</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>315.00</td>\n","      <td>0.00</td>\n","      <td>180.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>315.00</td>\n","      <td>0.00</td>\n","      <td>95.00</td>\n","      <td>140.00</td>\n","      <td>200.00</td>\n","      <td>115.00</td>\n","      <td>70.00</td>\n","      <td>190.00</td>\n","      <td>162.00</td>\n","      <td>162.00</td>\n","      <td>162.00</td>\n","      <td>162.00</td>\n","      <td>162.00</td>\n","      <td>3.44</td>\n","      <td>150448.86</td>\n","      <td>1983.74</td>\n","      <td>2637.75</td>\n","      <td>17.47</td>\n","      <td>668.60</td>\n","      <td>940.56</td>\n","      <td>2.57</td>\n","      <td>43.00</td>\n","      <td>57.00</td>\n","      <td>44.00</td>\n","      <td>40.00</td>\n","      <td>42.00</td>\n","      <td>28.00</td>\n","      <td>21.00</td>\n","      <td>24.00</td>\n","      <td>1.53</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>5.00</td>\n","      <td>23.00</td>\n","      <td>6.00</td>\n","      <td>0.26</td>\n","      <td>82.55</td>\n","      <td>60616.00</td>\n","      <td>34.00</td>\n","      <td>ARMOUR SQUARE</td>\n","      <td>high_cost</td>\n","      <td>800.00</td>\n","      <td>284200.00</td>\n","      <td>16392.80</td>\n","      <td>37.60</td>\n","      <td>13.00</td>\n","      <td>6.00</td>\n","      <td>6.00</td>\n","      <td>1.00</td>\n","      <td>9.20</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.71</td>\n","      <td>0.71</td>\n","      <td>D</td>\n","      <td>CD</td>\n","      <td>0.47</td>\n","      <td>41.95</td>\n","      <td>0.27</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>2.01</td>\n","      <td>0.17</td>\n","      <td>0.10</td>\n","      <td>6.89</td>\n","      <td>30676.00</td>\n","      <td>0.69</td>\n","      <td>0.79</td>\n","      <td>5.00</td>\n","      <td>0.00</td>\n","      <td>1.00</td>\n","      <td>3.00</td>\n","      <td>5.00</td>\n","      <td>2.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>17031841200</td>\n","      <td>0.01</td>\n","      <td>31.00</td>\n","      <td>False</td>\n","      <td>35.00</td>\n","      <td>80.00</td>\n","      <td>False</td>\n","      <td>82.00</td>\n","      <td>95.00</td>\n","      <td>True</td>\n","      <td>3.00</td>\n","      <td>52.00</td>\n","      <td>False</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>140.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>140.00</td>\n","      <td>0.00</td>\n","      <td>50.00</td>\n","      <td>50.00</td>\n","      <td>70.00</td>\n","      <td>30.00</td>\n","      <td>0.00</td>\n","      <td>80.00</td>\n","      <td>56.00</td>\n","      <td>56.00</td>\n","      <td>56.00</td>\n","      <td>56.00</td>\n","      <td>56.00</td>\n","      <td>6.11</td>\n","      <td>349170.58</td>\n","      <td>4233.79</td>\n","      <td>6083.96</td>\n","      <td>2.42</td>\n","      <td>853.65</td>\n","      <td>866.92</td>\n","      <td>0.16</td>\n","      <td>19.00</td>\n","      <td>81.00</td>\n","      <td>43.00</td>\n","      <td>35.00</td>\n","      <td>37.00</td>\n","      <td>75.00</td>\n","      <td>77.00</td>\n","      <td>77.00</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>12.00</td>\n","      <td>41.00</td>\n","      <td>36.00</td>\n","      <td>0.88</td>\n","      <td>96.50</td>\n","      <td>60608.00</td>\n","      <td>31.00</td>\n","      <td>LOWER WEST SIDE</td>\n","      <td>moderate_cost</td>\n","      <td>924.00</td>\n","      <td>183600.00</td>\n","      <td>20039.69</td>\n","      <td>22.70</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>9.20</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.65</td>\n","      <td>0.65</td>\n","      <td>D</td>\n","      <td>CD</td>\n","      <td>0.98</td>\n","      <td>122.18</td>\n","      <td>0.16</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>1.00</td>\n","      <td>0.00</td>\n","      <td>0.04</td>\n","      <td>6.89</td>\n","      <td>44336.00</td>\n","      <td>5.42</td>\n","      <td>2.31</td>\n","      <td>5.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>2.00</td>\n","      <td>3.00</td>\n","      <td>2.00</td>\n","      <td>0.00</td>\n","      <td>1.00</td>\n","      <td>0.00</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>17031839000</td>\n","      <td>0.01</td>\n","      <td>37.00</td>\n","      <td>False</td>\n","      <td>15.00</td>\n","      <td>23.00</td>\n","      <td>False</td>\n","      <td>27.00</td>\n","      <td>53.00</td>\n","      <td>False</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>False</td>\n","      <td>95.00</td>\n","      <td>0.00</td>\n","      <td>185.00</td>\n","      <td>0.00</td>\n","      <td>185.00</td>\n","      <td>90.00</td>\n","      <td>0.00</td>\n","      <td>185.00</td>\n","      <td>0.00</td>\n","      <td>100.00</td>\n","      <td>200.00</td>\n","      <td>180.00</td>\n","      <td>100.00</td>\n","      <td>40.00</td>\n","      <td>120.00</td>\n","      <td>148.00</td>\n","      <td>148.00</td>\n","      <td>148.00</td>\n","      <td>148.00</td>\n","      <td>148.00</td>\n","      <td>6.47</td>\n","      <td>869506.12</td>\n","      <td>4048.61</td>\n","      <td>1440.10</td>\n","      <td>6.48</td>\n","      <td>587.79</td>\n","      <td>263.39</td>\n","      <td>3.95</td>\n","      <td>32.00</td>\n","      <td>68.00</td>\n","      <td>29.00</td>\n","      <td>38.00</td>\n","      <td>35.00</td>\n","      <td>54.00</td>\n","      <td>14.00</td>\n","      <td>26.00</td>\n","      <td>1.61</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>16.58</td>\n","      <td>60605.00</td>\n","      <td>32.00</td>\n","      <td>LOOP</td>\n","      <td>high_cost</td>\n","      <td>2074.00</td>\n","      <td>277500.00</td>\n","      <td>46867.73</td>\n","      <td>18.40</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>9.60</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0</td>\n","      <td>0</td>\n","      <td>0.01</td>\n","      <td>63.06</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>6.00</td>\n","      <td>0.01</td>\n","      <td>0.00</td>\n","      <td>6.89</td>\n","      <td>102188.00</td>\n","      <td>1.49</td>\n","      <td>3.96</td>\n","      <td>3.00</td>\n","      <td>4.00</td>\n","      <td>1.00</td>\n","      <td>3.00</td>\n","      <td>5.00</td>\n","      <td>2.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","    <div class=\"colab-df-buttons\">\n","\n","  <div class=\"colab-df-container\">\n","    <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-0ed1fc78-3bd5-4350-90fc-a62025160971')\"\n","            title=\"Convert this dataframe to an interactive table.\"\n","            style=\"display:none;\">\n","\n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\">\n","    <path d=\"M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z\"/>\n","  </svg>\n","    </button>\n","\n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    .colab-df-buttons div {\n","      margin-bottom: 4px;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","    <script>\n","      const buttonEl =\n","        document.querySelector('#df-0ed1fc78-3bd5-4350-90fc-a62025160971 button.colab-df-convert');\n","      buttonEl.style.display =\n","        google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","      async function convertToInteractive(key) {\n","        const element = document.querySelector('#df-0ed1fc78-3bd5-4350-90fc-a62025160971');\n","        const dataTable =\n","          await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                    [key], {});\n","        if (!dataTable) return;\n","\n","        const docLinkHtml = 'Like what you see? Visit the ' +\n","          '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","          + ' to learn more about interactive tables.';\n","        element.innerHTML = '';\n","        dataTable['output_type'] = 'display_data';\n","        await google.colab.output.renderOutput(dataTable, element);\n","        const docLink = document.createElement('div');\n","        docLink.innerHTML = docLinkHtml;\n","        element.appendChild(docLink);\n","      }\n","    </script>\n","  </div>\n","\n","\n","<div id=\"df-e3cca5a3-bbe7-4f5b-9cb0-33660f778a67\">\n","  <button class=\"colab-df-quickchart\" onclick=\"quickchart('df-e3cca5a3-bbe7-4f5b-9cb0-33660f778a67')\"\n","            title=\"Suggest charts\"\n","            style=\"display:none;\">\n","\n","<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","     width=\"24px\">\n","    <g>\n","        <path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z\"/>\n","    </g>\n","</svg>\n","  </button>\n","\n","<style>\n","  .colab-df-quickchart {\n","      --bg-color: #E8F0FE;\n","      --fill-color: #1967D2;\n","      --hover-bg-color: #E2EBFA;\n","      --hover-fill-color: #174EA6;\n","      --disabled-fill-color: #AAA;\n","      --disabled-bg-color: #DDD;\n","  }\n","\n","  [theme=dark] .colab-df-quickchart {\n","      --bg-color: #3B4455;\n","      --fill-color: #D2E3FC;\n","      --hover-bg-color: #434B5C;\n","      --hover-fill-color: #FFFFFF;\n","      --disabled-bg-color: #3B4455;\n","      --disabled-fill-color: #666;\n","  }\n","\n","  .colab-df-quickchart {\n","    background-color: var(--bg-color);\n","    border: none;\n","    border-radius: 50%;\n","    cursor: pointer;\n","    display: none;\n","    fill: var(--fill-color);\n","    height: 32px;\n","    padding: 0;\n","    width: 32px;\n","  }\n","\n","  .colab-df-quickchart:hover {\n","    background-color: var(--hover-bg-color);\n","    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);\n","    fill: var(--button-hover-fill-color);\n","  }\n","\n","  .colab-df-quickchart-complete:disabled,\n","  .colab-df-quickchart-complete:disabled:hover {\n","    background-color: var(--disabled-bg-color);\n","    fill: var(--disabled-fill-color);\n","    box-shadow: none;\n","  }\n","\n","  .colab-df-spinner {\n","    border: 2px solid var(--fill-color);\n","    border-color: transparent;\n","    border-bottom-color: var(--fill-color);\n","    animation:\n","      spin 1s steps(1) infinite;\n","  }\n","\n","  @keyframes spin {\n","    0% {\n","      border-color: transparent;\n","      border-bottom-color: var(--fill-color);\n","      border-left-color: var(--fill-color);\n","    }\n","    20% {\n","      border-color: transparent;\n","      border-left-color: var(--fill-color);\n","      border-top-color: var(--fill-color);\n","    }\n","    30% {\n","      border-color: transparent;\n","      border-left-color: var(--fill-color);\n","      border-top-color: var(--fill-color);\n","      border-right-color: var(--fill-color);\n","    }\n","    40% {\n","      border-color: transparent;\n","      border-right-color: var(--fill-color);\n","      border-top-color: var(--fill-color);\n","    }\n","    60% {\n","      border-color: transparent;\n","      border-right-color: var(--fill-color);\n","    }\n","    80% {\n","      border-color: transparent;\n","      border-right-color: var(--fill-color);\n","      border-bottom-color: var(--fill-color);\n","    }\n","    90% {\n","      border-color: transparent;\n","      border-bottom-color: var(--fill-color);\n","    }\n","  }\n","</style>\n","\n","  <script>\n","    async function quickchart(key) {\n","      const quickchartButtonEl =\n","        document.querySelector('#' + key + ' button');\n","      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.\n","      quickchartButtonEl.classList.add('colab-df-spinner');\n","      try {\n","        const charts = await google.colab.kernel.invokeFunction(\n","            'suggestCharts', [key], {});\n","      } catch (error) {\n","        console.error('Error during call to suggestCharts:', error);\n","      }\n","      quickchartButtonEl.classList.remove('colab-df-spinner');\n","      quickchartButtonEl.classList.add('colab-df-quickchart-complete');\n","    }\n","    (() => {\n","      let quickchartButtonEl =\n","        document.querySelector('#df-e3cca5a3-bbe7-4f5b-9cb0-33660f778a67 button');\n","      quickchartButtonEl.style.display =\n","        google.colab.kernel.accessAllowed ? 'block' : 'none';\n","    })();\n","  </script>\n","</div>\n","\n","    </div>\n","  </div>\n"],"application/vnd.google.colaboratory.intrinsic+json":{"type":"dataframe","variable_name":"merged_df"}},"metadata":{},"execution_count":25}]},{"cell_type":"markdown","source":["# Data check"],"metadata":{"id":"7S_2OsKHlZ7Q"}},{"cell_type":"markdown","source":["## Identify constants"],"metadata":{"id":"v-zeLPj7leiz"}},{"cell_type":"code","source":["constant_columns = [col for col in merged_df.columns if merged_df[col].nunique() == 1]\n","\n","constant_columns"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"Vi5LTv79lgK8","executionInfo":{"status":"ok","timestamp":1726684934962,"user_tz":300,"elapsed":171,"user":{"displayName":"Sandra Tilmon","userId":"02128196715661756059"}},"outputId":"acaa1580-3e66-4675-b532-9d6988fa11c5"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["['Bldg_loss_rate_ge90pct_lowinc']"]},"metadata":{},"execution_count":26}]},{"cell_type":"code","source":["# merged_df[constant_columns] = merged_df[constant_columns].apply(\n","#     pd.to_numeric, errors='coerce')\n","\n","# merged_df[constant_columns].describe()"],"metadata":{"id":"Wv2uwnQQWI5g"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["# Drop constant columns\n","\n","# merged_df.drop(columns=constant_columns, inplace=True)"],"metadata":{"id":"kAixjHD4WrVt"},"execution_count":null,"outputs":[]},{"cell_type":"markdown","source":["## Identify duplicated information across variables"],"metadata":{"id":"MFqhwB1Algqx"}},{"cell_type":"code","source":["from itertools import combinations\n","\n","# Convert all columns to numeric (if possible)\n","merged_df = merged_df.apply(pd.to_numeric, errors='coerce')\n","\n","# Get all pairs of columns\n","column_pairs = combinations(merged_df.columns, 2)\n","\n","# Find pairs of columns that are identical\n","identical_pairs = [(col1, col2) for col1, col2 in column_pairs if merged_df[col1].equals(merged_df[col2])]\n","\n","# Display the identical pairs\n","# identical_pairs\n","\n","#  Compare distributions for the identical pairs\n","for col1, col2 in identical_pairs:\n","    print(f\"\\nComparing distributions for {col1} and {col2}\")\n","\n","    # Plot histograms for visual comparison\n","    plt.figure(figsize=(10, 5))\n","\n","    plt.subplot(1, 2, 1)\n","    merged_df[col1].hist(bins=20)\n","    plt.title(f'Distribution of {col1}')\n","\n","    plt.subplot(1, 2, 2)\n","    merged_df[col2].hist(bins=20)\n","    plt.title(f'Distribution of {col2}')\n","\n","    plt.tight_layout()\n","    plt.show()\n","\n","    # Show descriptive statistics for both columns\n","    print(f\"Description of {col1}:\")\n","    print(merged_df[col1].describe())\n","    print(f\"\\nDescription of {col2}:\")\n","    print(merged_df[col2].describe())"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":1000,"output_embedded_package_id":"1RchM0iR8vK2o6b7C9DM2W_RwNi-lL5r1"},"id":"LTH9tFUmljvV","executionInfo":{"status":"ok","timestamp":1726684996058,"user_tz":300,"elapsed":54763,"user":{"displayName":"Sandra Tilmon","userId":"02128196715661756059"}},"outputId":"4f4c0b79-b1b9-4c86-c7e8-b748f6e5db38"},"execution_count":null,"outputs":[{"output_type":"display_data","data":{"text/plain":"Output hidden; open in https://colab.research.google.com to view."},"metadata":{}}]},{"cell_type":"code","source":["# # Drop the second column in each identical pair\n","# for col1, col2 in identical_pairs:\n","#     print(f\"Deleting column: {col2}\")\n","#     merged_df = merged_df.drop(columns=[col2])\n","\n","# # Display the remaining columns after deletion\n","# print(\"Remaining columns after deleting identical pairs:\")\n","# print(merged_df.columns)"],"metadata":{"id":"O9oiS0o_X9uB"},"execution_count":null,"outputs":[]},{"cell_type":"markdown","source":["## Duplicated tract rows?"],"metadata":{"id":"IsXucqx2PDTd"}},{"cell_type":"code","source":["len(merged_df['GEOID10'])-len(merged_df['GEOID10'].drop_duplicates())"],"metadata":{"id":"_snV4IEcPGkh","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1726684996058,"user_tz":300,"elapsed":2,"user":{"displayName":"Sandra Tilmon","userId":"02128196715661756059"}},"outputId":"69ff9a5a-bdb9-4ca2-a72d-02a87a9b310d"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["0"]},"metadata":{},"execution_count":28}]},{"cell_type":"markdown","metadata":{"id":"dgdwjmPfWFGu"},"source":["## Export final housing dataset"]},{"cell_type":"code","execution_count":11,"metadata":{"id":"JaMSUC0MWFGu","executionInfo":{"status":"ok","timestamp":1727122283382,"user_tz":300,"elapsed":790,"user":{"displayName":"Sandra Tilmon","userId":"02128196715661756059"}}},"outputs":[],"source":["with open(curated +  '00061_Housing_Chicago.csv', 'w') as f:\n","  merged_df.to_csv(f)"]},{"cell_type":"code","execution_count":13,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":278},"executionInfo":{"status":"ok","timestamp":1727122299005,"user_tz":300,"elapsed":612,"user":{"displayName":"Sandra Tilmon","userId":"02128196715661756059"}},"outputId":"299fa1ff-4359-49c3-a439-e2cd95fb862c","id":"yBvJFyvMWFGu"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["       GEOID10  Bldg_loss_rate  Bldg_loss_rate_pctile  Bldg_loss_rate_ge90pct_lowinc  \\\n","0  17031842400            0.01                  31.00                           0.00   \n","1  17031840300            0.01                  31.00                           0.00   \n","2  17031841100            0.01                  42.00                           0.00   \n","3  17031841200            0.01                  31.00                           0.00   \n","4  17031839000            0.01                  37.00                           0.00   \n","\n","   Housing_burden_pct  Housing_burden_pctile  Housing_burden_ge90pct_lowinc  Lead_pre1960  \\\n","0               39.00                  86.00                           0.00         66.00   \n","1               38.00                  84.00                           0.00         78.00   \n","2               39.00                  85.00                           0.00         21.00   \n","3               35.00                  80.00                           0.00         82.00   \n","4               15.00                  23.00                           0.00         27.00   \n","\n","   Lead_pre1960_pctile  Lead_ge90pct_value_lt90pct_lowinc  Energy_bdn  Energy_bdn_pctile  \\\n","0                86.00                               0.00        5.00              88.00   \n","1                93.00                               1.00        3.00              54.00   \n","2                46.00                               0.00        3.00              57.00   \n","3                95.00                               1.00        3.00              52.00   \n","4                53.00                               0.00        0.00               0.00   \n","\n","   Energy_bdn_pctile_lowinc  HFL_BOTTLED GAS  HFL_COAL  HFL_ELECTRICITY  HFL_FUEL OIL  HFL_NONE  \\\n","0                      0.00            70.00      0.00           180.00          0.00      0.00   \n","1                      0.00             0.00      0.00           170.00          0.00      0.00   \n","2                      0.00             0.00      0.00           315.00          0.00    180.00   \n","3                      0.00             0.00      0.00           140.00          0.00      0.00   \n","4                      0.00            95.00      0.00           185.00          0.00    185.00   \n","\n","   HFL_OTHER  HFL_SOLAR  HFL_UTILITY GAS  HFL_WOOD  YBL6_1940-59  YBL6_1960-79  YBL6_1980-99  \\\n","0       0.00       0.00           180.00      0.00        135.00        105.00         30.00   \n","1       0.00       0.00           170.00      0.00         60.00         80.00         40.00   \n","2       0.00       0.00           315.00      0.00         95.00        140.00        200.00   \n","3       0.00       0.00           140.00      0.00         50.00         50.00         70.00   \n","4      90.00       0.00           185.00      0.00        100.00        200.00        180.00   \n","\n","   YBL6_2000-09  YBL6_2010  YBL6_BEFORE 1940  FPL15_0-100  FPL15_100-150  FPL15_150-200  \\\n","0         20.00      30.00            110.00        86.00          86.00          86.00   \n","1         40.00      20.00            100.00        68.00          68.00          68.00   \n","2        115.00      70.00            190.00       162.00         162.00         162.00   \n","3         30.00       0.00             80.00        56.00          56.00          56.00   \n","4        100.00      40.00            120.00       148.00         148.00         148.00   \n","\n","   FPL15_200-400  FPL15_400  UNITS  HINCP_UNITS  ELEP_UNITS  GASP_UNITS  FULP_UNITS   ELEP  \\\n","0          86.00      86.00   2.91    140456.57     3044.67     4127.79       20.22 903.37   \n","1          68.00      68.00   3.56    239496.99     2833.02     4457.50       19.38 760.24   \n","2         162.00     162.00   3.44    150448.86     1983.74     2637.75       17.47 668.60   \n","3          56.00      56.00   6.11    349170.58     4233.79     6083.96        2.42 853.65   \n","4         148.00     148.00   6.47    869506.12     4048.61     1440.10        6.48 587.79   \n","\n","     GASP  FULP  OwnerOccPct  RenterOccPct  ProbOwner30pct  ProbRenter30pct  ProbALL30pct  \\\n","0 1032.50  6.06        66.00         34.00           20.00            58.00         33.00   \n","1 1051.15  2.84        71.00         29.00           30.00            45.00         34.00   \n","2  940.56  2.57        43.00         57.00           44.00            40.00         42.00   \n","3  866.92  0.16        19.00         81.00           43.00            35.00         37.00   \n","4  263.39  3.95        32.00         68.00           29.00            38.00         35.00   \n","\n","   OwnerPre1960pct  RentPre1960pct  AllPre1960pct  HCV_PUBLIC_PCT  UAHB_COUNT  FUND_DHB_AMT  \\\n","0            82.00           53.00          72.00           17.21        2.00      20000.00   \n","1            55.00           67.00          59.00             NaN        2.00       8365.00   \n","2            28.00           21.00          24.00            1.53         NaN           NaN   \n","3            75.00           77.00          77.00             NaN         NaN           NaN   \n","4            54.00           14.00          26.00            1.61         NaN           NaN   \n","\n","   UAHOR_COUNT  FUND_DHOR_AMT  RENTAL_COUNT  RENTAL_AMT  OTHER_COUNT  OTHER_AMT  TOTAL_COUNT  \\\n","0         0.00           0.00          0.00        0.00         2.00   20000.00         2.00   \n","1         0.00           0.00          0.00        0.00         2.00    8365.00         2.00   \n","2          NaN            NaN           NaN         NaN          NaN        NaN          NaN   \n","3          NaN            NaN           NaN         NaN          NaN        NaN          NaN   \n","4          NaN            NaN           NaN         NaN          NaN        NaN          NaN   \n","\n","   TOTAL_AMT  UATOTHOA_COUNT  UATOTHOA_AMT  avg_NSP3NEED  avg_PCT_LMMI  avg_PCT_LM  avg_HC_RATE  \\\n","0   20000.00            2.00      20000.00           NaN           NaN         NaN          NaN   \n","1    8365.00            2.00       8365.00           NaN           NaN         NaN          NaN   \n","2        NaN             NaN           NaN           NaN           NaN         NaN          NaN   \n","3        NaN             NaN           NaN           NaN           NaN         NaN          NaN   \n","4        NaN             NaN           NaN           NaN           NaN         NaN          NaN   \n","\n","   avg_SDQ_RATE  USPS_VAC_pct  USPS_NS_pct  HMDA_pct  fore_STARTS_pct  fore_REO_pct  \\\n","0           NaN           NaN          NaN       NaN              NaN           NaN   \n","1           NaN           NaN          NaN       NaN              NaN           NaN   \n","2           NaN           NaN          NaN       NaN              NaN           NaN   \n","3           NaN           NaN          NaN       NaN              NaN           NaN   \n","4           NaN           NaN          NaN       NaN              NaN           NaN   \n","\n","   sum_IMPACT_pct  PubHousCount  TOTAL_DWELLING_UNITS  TOTAL_OCCUPIED  PubHousOcc_pct  \\\n","0             NaN           NaN                   NaN             NaN             NaN   \n","1             NaN          4.00                  7.00            6.00            0.86   \n","2             NaN          5.00                 23.00            6.00            0.26   \n","3             NaN         12.00                 41.00           36.00            0.88   \n","4             NaN           NaN                   NaN             NaN             NaN   \n","\n","   BldgViolRate1000  zip_code  commarea_n  HPRICETIER  median_rent  median_home_value  \\\n","0            110.03  60619.00       44.00         NaN      1031.00          139600.00   \n","1             90.53  60608.00       59.00         NaN       930.00          216100.00   \n","2             82.55  60616.00       34.00         NaN       800.00          284200.00   \n","3             96.50  60608.00       31.00         NaN       924.00          183600.00   \n","4             16.58  60605.00       32.00         NaN      2074.00          277500.00   \n","\n","   pop_density_sqmi  hardship  city_property_tot  prop_comm  prop_plndev  prop_resdntl  \\\n","0           4098.29     27.60              40.00       4.00         0.00         36.00   \n","1          12067.21     21.80               8.00       3.00         0.00          5.00   \n","2          16392.80     37.60              13.00       6.00         6.00          1.00   \n","3          20039.69     22.70               0.00       0.00         0.00          0.00   \n","4          46867.73     18.40               0.00       0.00         0.00          0.00   \n","\n","   urban_flood_suscep  proportionA  proportionB  proportionC  proportionD  proportionCorD  \\\n","0                9.50         0.00         0.00         0.00         0.00            0.00   \n","1                9.40         0.00         0.00         0.01         0.75            0.76   \n","2                9.20         0.00         0.00         0.00         0.71            0.71   \n","3                9.20         0.00         0.00         0.00         0.65            0.65   \n","4                9.60         0.00         0.00         0.00         0.00            0.00   \n","\n","   primary_grade_4levels  primary_grade_3levels  avg_Proportion Assessed  avg_Age  \\\n","0                   0.00                   0.00                     0.99    82.71   \n","1                    NaN                    NaN                     0.98    91.02   \n","2                    NaN                    NaN                     0.47    41.95   \n","3                    NaN                    NaN                     0.98   122.18   \n","4                   0.00                   0.00                     0.01    63.06   \n","\n","   avg_Road Proximity 101 - 300 Feet  avg_O'Hare Noise Indicator  avg_FEMA Floodplain  \\\n","0                               0.16                        0.00                 0.00   \n","1                               0.25                        0.00                 0.00   \n","2                               0.27                        0.00                 0.00   \n","3                               0.16                        0.00                 0.00   \n","4                               0.00                        0.00                 0.00   \n","\n","   avg_Flood Risk Factor  avg_Flood Risk Direction  avg_Road Proximity < 100 Feet  avg_Tax Rate  \\\n","0                   1.93                      0.24                           0.01          6.91   \n","1                   2.51                      0.11                           0.02          6.92   \n","2                   2.01                      0.17                           0.10          6.89   \n","3                   1.00                      0.00                           0.04          6.89   \n","4                   6.00                      0.01                           0.00          6.89   \n","\n","   avg_Tract Median Income  ForecloseRate1000  eviction_filings_rate  viol_7_clus  flood_6_clus  \\\n","0                 39097.00               9.43                   5.50         5.00          5.00   \n","1                 48622.00               8.45                   3.11         5.00          5.00   \n","2                 30676.00               0.69                   0.79         5.00          0.00   \n","3                 44336.00               5.42                   2.31         5.00          0.00   \n","4                102188.00               1.49                   3.96         3.00          4.00   \n","\n","   foreclose_4_clus  house_age_4q_clus  pre1960_8_clus  Prob30_3q_clus  Prob50_4_clus  \\\n","0              1.00               0.00            0.00            0.00           0.00   \n","1              0.00               2.00            0.00            2.00           0.00   \n","2              1.00               3.00            5.00            2.00           0.00   \n","3              0.00               2.00            3.00            2.00           0.00   \n","4              1.00               3.00            5.00            2.00           0.00   \n","\n","   Crowding_4_clus  evic_3_clus  \n","0             0.00         1.00  \n","1             1.00         0.00  \n","2             0.00         0.00  \n","3             1.00         0.00  \n","4             0.00         0.00  "],"text/html":["\n","  <div id=\"df-6f14bea9-b21f-4e7d-b86b-c7f2fb44fd89\" class=\"colab-df-container\">\n","    <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>GEOID10</th>\n","      <th>Bldg_loss_rate</th>\n","      <th>Bldg_loss_rate_pctile</th>\n","      <th>Bldg_loss_rate_ge90pct_lowinc</th>\n","      <th>Housing_burden_pct</th>\n","      <th>Housing_burden_pctile</th>\n","      <th>Housing_burden_ge90pct_lowinc</th>\n","      <th>Lead_pre1960</th>\n","      <th>Lead_pre1960_pctile</th>\n","      <th>Lead_ge90pct_value_lt90pct_lowinc</th>\n","      <th>Energy_bdn</th>\n","      <th>Energy_bdn_pctile</th>\n","      <th>Energy_bdn_pctile_lowinc</th>\n","      <th>HFL_BOTTLED GAS</th>\n","      <th>HFL_COAL</th>\n","      <th>HFL_ELECTRICITY</th>\n","      <th>HFL_FUEL OIL</th>\n","      <th>HFL_NONE</th>\n","      <th>HFL_OTHER</th>\n","      <th>HFL_SOLAR</th>\n","      <th>HFL_UTILITY GAS</th>\n","      <th>HFL_WOOD</th>\n","      <th>YBL6_1940-59</th>\n","      <th>YBL6_1960-79</th>\n","      <th>YBL6_1980-99</th>\n","      <th>YBL6_2000-09</th>\n","      <th>YBL6_2010</th>\n","      <th>YBL6_BEFORE 1940</th>\n","      <th>FPL15_0-100</th>\n","      <th>FPL15_100-150</th>\n","      <th>FPL15_150-200</th>\n","      <th>FPL15_200-400</th>\n","      <th>FPL15_400</th>\n","      <th>UNITS</th>\n","      <th>HINCP_UNITS</th>\n","      <th>ELEP_UNITS</th>\n","      <th>GASP_UNITS</th>\n","      <th>FULP_UNITS</th>\n","      <th>ELEP</th>\n","      <th>GASP</th>\n","      <th>FULP</th>\n","      <th>OwnerOccPct</th>\n","      <th>RenterOccPct</th>\n","      <th>ProbOwner30pct</th>\n","      <th>ProbRenter30pct</th>\n","      <th>ProbALL30pct</th>\n","      <th>OwnerPre1960pct</th>\n","      <th>RentPre1960pct</th>\n","      <th>AllPre1960pct</th>\n","      <th>HCV_PUBLIC_PCT</th>\n","      <th>UAHB_COUNT</th>\n","      <th>FUND_DHB_AMT</th>\n","      <th>UAHOR_COUNT</th>\n","      <th>FUND_DHOR_AMT</th>\n","      <th>RENTAL_COUNT</th>\n","      <th>RENTAL_AMT</th>\n","      <th>OTHER_COUNT</th>\n","      <th>OTHER_AMT</th>\n","      <th>TOTAL_COUNT</th>\n","      <th>TOTAL_AMT</th>\n","      <th>UATOTHOA_COUNT</th>\n","      <th>UATOTHOA_AMT</th>\n","      <th>avg_NSP3NEED</th>\n","      <th>avg_PCT_LMMI</th>\n","      <th>avg_PCT_LM</th>\n","      <th>avg_HC_RATE</th>\n","      <th>avg_SDQ_RATE</th>\n","      <th>USPS_VAC_pct</th>\n","      <th>USPS_NS_pct</th>\n","      <th>HMDA_pct</th>\n","      <th>fore_STARTS_pct</th>\n","      <th>fore_REO_pct</th>\n","      <th>sum_IMPACT_pct</th>\n","      <th>PubHousCount</th>\n","      <th>TOTAL_DWELLING_UNITS</th>\n","      <th>TOTAL_OCCUPIED</th>\n","      <th>PubHousOcc_pct</th>\n","      <th>BldgViolRate1000</th>\n","      <th>zip_code</th>\n","      <th>commarea_n</th>\n","      <th>HPRICETIER</th>\n","      <th>median_rent</th>\n","      <th>median_home_value</th>\n","      <th>pop_density_sqmi</th>\n","      <th>hardship</th>\n","      <th>city_property_tot</th>\n","      <th>prop_comm</th>\n","      <th>prop_plndev</th>\n","      <th>prop_resdntl</th>\n","      <th>urban_flood_suscep</th>\n","      <th>proportionA</th>\n","      <th>proportionB</th>\n","      <th>proportionC</th>\n","      <th>proportionD</th>\n","      <th>proportionCorD</th>\n","      <th>primary_grade_4levels</th>\n","      <th>primary_grade_3levels</th>\n","      <th>avg_Proportion Assessed</th>\n","      <th>avg_Age</th>\n","      <th>avg_Road Proximity 101 - 300 Feet</th>\n","      <th>avg_O'Hare Noise Indicator</th>\n","      <th>avg_FEMA Floodplain</th>\n","      <th>avg_Flood Risk Factor</th>\n","      <th>avg_Flood Risk Direction</th>\n","      <th>avg_Road Proximity &lt; 100 Feet</th>\n","      <th>avg_Tax Rate</th>\n","      <th>avg_Tract Median Income</th>\n","      <th>ForecloseRate1000</th>\n","      <th>eviction_filings_rate</th>\n","      <th>viol_7_clus</th>\n","      <th>flood_6_clus</th>\n","      <th>foreclose_4_clus</th>\n","      <th>house_age_4q_clus</th>\n","      <th>pre1960_8_clus</th>\n","      <th>Prob30_3q_clus</th>\n","      <th>Prob50_4_clus</th>\n","      <th>Crowding_4_clus</th>\n","      <th>evic_3_clus</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>17031842400</td>\n","      <td>0.01</td>\n","      <td>31.00</td>\n","      <td>0.00</td>\n","      <td>39.00</td>\n","      <td>86.00</td>\n","      <td>0.00</td>\n","      <td>66.00</td>\n","      <td>86.00</td>\n","      <td>0.00</td>\n","      <td>5.00</td>\n","      <td>88.00</td>\n","      <td>0.00</td>\n","      <td>70.00</td>\n","      <td>0.00</td>\n","      <td>180.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>180.00</td>\n","      <td>0.00</td>\n","      <td>135.00</td>\n","      <td>105.00</td>\n","      <td>30.00</td>\n","      <td>20.00</td>\n","      <td>30.00</td>\n","      <td>110.00</td>\n","      <td>86.00</td>\n","      <td>86.00</td>\n","      <td>86.00</td>\n","      <td>86.00</td>\n","      <td>86.00</td>\n","      <td>2.91</td>\n","      <td>140456.57</td>\n","      <td>3044.67</td>\n","      <td>4127.79</td>\n","      <td>20.22</td>\n","      <td>903.37</td>\n","      <td>1032.50</td>\n","      <td>6.06</td>\n","      <td>66.00</td>\n","      <td>34.00</td>\n","      <td>20.00</td>\n","      <td>58.00</td>\n","      <td>33.00</td>\n","      <td>82.00</td>\n","      <td>53.00</td>\n","      <td>72.00</td>\n","      <td>17.21</td>\n","      <td>2.00</td>\n","      <td>20000.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>2.00</td>\n","      <td>20000.00</td>\n","      <td>2.00</td>\n","      <td>20000.00</td>\n","      <td>2.00</td>\n","      <td>20000.00</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>110.03</td>\n","      <td>60619.00</td>\n","      <td>44.00</td>\n","      <td>NaN</td>\n","      <td>1031.00</td>\n","      <td>139600.00</td>\n","      <td>4098.29</td>\n","      <td>27.60</td>\n","      <td>40.00</td>\n","      <td>4.00</td>\n","      <td>0.00</td>\n","      <td>36.00</td>\n","      <td>9.50</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.99</td>\n","      <td>82.71</td>\n","      <td>0.16</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>1.93</td>\n","      <td>0.24</td>\n","      <td>0.01</td>\n","      <td>6.91</td>\n","      <td>39097.00</td>\n","      <td>9.43</td>\n","      <td>5.50</td>\n","      <td>5.00</td>\n","      <td>5.00</td>\n","      <td>1.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>1.00</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>17031840300</td>\n","      <td>0.01</td>\n","      <td>31.00</td>\n","      <td>0.00</td>\n","      <td>38.00</td>\n","      <td>84.00</td>\n","      <td>0.00</td>\n","      <td>78.00</td>\n","      <td>93.00</td>\n","      <td>1.00</td>\n","      <td>3.00</td>\n","      <td>54.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>170.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>170.00</td>\n","      <td>0.00</td>\n","      <td>60.00</td>\n","      <td>80.00</td>\n","      <td>40.00</td>\n","      <td>40.00</td>\n","      <td>20.00</td>\n","      <td>100.00</td>\n","      <td>68.00</td>\n","      <td>68.00</td>\n","      <td>68.00</td>\n","      <td>68.00</td>\n","      <td>68.00</td>\n","      <td>3.56</td>\n","      <td>239496.99</td>\n","      <td>2833.02</td>\n","      <td>4457.50</td>\n","      <td>19.38</td>\n","      <td>760.24</td>\n","      <td>1051.15</td>\n","      <td>2.84</td>\n","      <td>71.00</td>\n","      <td>29.00</td>\n","      <td>30.00</td>\n","      <td>45.00</td>\n","      <td>34.00</td>\n","      <td>55.00</td>\n","      <td>67.00</td>\n","      <td>59.00</td>\n","      <td>NaN</td>\n","      <td>2.00</td>\n","      <td>8365.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>2.00</td>\n","      <td>8365.00</td>\n","      <td>2.00</td>\n","      <td>8365.00</td>\n","      <td>2.00</td>\n","      <td>8365.00</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>4.00</td>\n","      <td>7.00</td>\n","      <td>6.00</td>\n","      <td>0.86</td>\n","      <td>90.53</td>\n","      <td>60608.00</td>\n","      <td>59.00</td>\n","      <td>NaN</td>\n","      <td>930.00</td>\n","      <td>216100.00</td>\n","      <td>12067.21</td>\n","      <td>21.80</td>\n","      <td>8.00</td>\n","      <td>3.00</td>\n","      <td>0.00</td>\n","      <td>5.00</td>\n","      <td>9.40</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.01</td>\n","      <td>0.75</td>\n","      <td>0.76</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>0.98</td>\n","      <td>91.02</td>\n","      <td>0.25</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>2.51</td>\n","      <td>0.11</td>\n","      <td>0.02</td>\n","      <td>6.92</td>\n","      <td>48622.00</td>\n","      <td>8.45</td>\n","      <td>3.11</td>\n","      <td>5.00</td>\n","      <td>5.00</td>\n","      <td>0.00</td>\n","      <td>2.00</td>\n","      <td>0.00</td>\n","      <td>2.00</td>\n","      <td>0.00</td>\n","      <td>1.00</td>\n","      <td>0.00</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>17031841100</td>\n","      <td>0.01</td>\n","      <td>42.00</td>\n","      <td>0.00</td>\n","      <td>39.00</td>\n","      <td>85.00</td>\n","      <td>0.00</td>\n","      <td>21.00</td>\n","      <td>46.00</td>\n","      <td>0.00</td>\n","      <td>3.00</td>\n","      <td>57.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>315.00</td>\n","      <td>0.00</td>\n","      <td>180.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>315.00</td>\n","      <td>0.00</td>\n","      <td>95.00</td>\n","      <td>140.00</td>\n","      <td>200.00</td>\n","      <td>115.00</td>\n","      <td>70.00</td>\n","      <td>190.00</td>\n","      <td>162.00</td>\n","      <td>162.00</td>\n","      <td>162.00</td>\n","      <td>162.00</td>\n","      <td>162.00</td>\n","      <td>3.44</td>\n","      <td>150448.86</td>\n","      <td>1983.74</td>\n","      <td>2637.75</td>\n","      <td>17.47</td>\n","      <td>668.60</td>\n","      <td>940.56</td>\n","      <td>2.57</td>\n","      <td>43.00</td>\n","      <td>57.00</td>\n","      <td>44.00</td>\n","      <td>40.00</td>\n","      <td>42.00</td>\n","      <td>28.00</td>\n","      <td>21.00</td>\n","      <td>24.00</td>\n","      <td>1.53</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>5.00</td>\n","      <td>23.00</td>\n","      <td>6.00</td>\n","      <td>0.26</td>\n","      <td>82.55</td>\n","      <td>60616.00</td>\n","      <td>34.00</td>\n","      <td>NaN</td>\n","      <td>800.00</td>\n","      <td>284200.00</td>\n","      <td>16392.80</td>\n","      <td>37.60</td>\n","      <td>13.00</td>\n","      <td>6.00</td>\n","      <td>6.00</td>\n","      <td>1.00</td>\n","      <td>9.20</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.71</td>\n","      <td>0.71</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>0.47</td>\n","      <td>41.95</td>\n","      <td>0.27</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>2.01</td>\n","      <td>0.17</td>\n","      <td>0.10</td>\n","      <td>6.89</td>\n","      <td>30676.00</td>\n","      <td>0.69</td>\n","      <td>0.79</td>\n","      <td>5.00</td>\n","      <td>0.00</td>\n","      <td>1.00</td>\n","      <td>3.00</td>\n","      <td>5.00</td>\n","      <td>2.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>17031841200</td>\n","      <td>0.01</td>\n","      <td>31.00</td>\n","      <td>0.00</td>\n","      <td>35.00</td>\n","      <td>80.00</td>\n","      <td>0.00</td>\n","      <td>82.00</td>\n","      <td>95.00</td>\n","      <td>1.00</td>\n","      <td>3.00</td>\n","      <td>52.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>140.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>140.00</td>\n","      <td>0.00</td>\n","      <td>50.00</td>\n","      <td>50.00</td>\n","      <td>70.00</td>\n","      <td>30.00</td>\n","      <td>0.00</td>\n","      <td>80.00</td>\n","      <td>56.00</td>\n","      <td>56.00</td>\n","      <td>56.00</td>\n","      <td>56.00</td>\n","      <td>56.00</td>\n","      <td>6.11</td>\n","      <td>349170.58</td>\n","      <td>4233.79</td>\n","      <td>6083.96</td>\n","      <td>2.42</td>\n","      <td>853.65</td>\n","      <td>866.92</td>\n","      <td>0.16</td>\n","      <td>19.00</td>\n","      <td>81.00</td>\n","      <td>43.00</td>\n","      <td>35.00</td>\n","      <td>37.00</td>\n","      <td>75.00</td>\n","      <td>77.00</td>\n","      <td>77.00</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>12.00</td>\n","      <td>41.00</td>\n","      <td>36.00</td>\n","      <td>0.88</td>\n","      <td>96.50</td>\n","      <td>60608.00</td>\n","      <td>31.00</td>\n","      <td>NaN</td>\n","      <td>924.00</td>\n","      <td>183600.00</td>\n","      <td>20039.69</td>\n","      <td>22.70</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>9.20</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.65</td>\n","      <td>0.65</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>0.98</td>\n","      <td>122.18</td>\n","      <td>0.16</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>1.00</td>\n","      <td>0.00</td>\n","      <td>0.04</td>\n","      <td>6.89</td>\n","      <td>44336.00</td>\n","      <td>5.42</td>\n","      <td>2.31</td>\n","      <td>5.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>2.00</td>\n","      <td>3.00</td>\n","      <td>2.00</td>\n","      <td>0.00</td>\n","      <td>1.00</td>\n","      <td>0.00</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>17031839000</td>\n","      <td>0.01</td>\n","      <td>37.00</td>\n","      <td>0.00</td>\n","      <td>15.00</td>\n","      <td>23.00</td>\n","      <td>0.00</td>\n","      <td>27.00</td>\n","      <td>53.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>95.00</td>\n","      <td>0.00</td>\n","      <td>185.00</td>\n","      <td>0.00</td>\n","      <td>185.00</td>\n","      <td>90.00</td>\n","      <td>0.00</td>\n","      <td>185.00</td>\n","      <td>0.00</td>\n","      <td>100.00</td>\n","      <td>200.00</td>\n","      <td>180.00</td>\n","      <td>100.00</td>\n","      <td>40.00</td>\n","      <td>120.00</td>\n","      <td>148.00</td>\n","      <td>148.00</td>\n","      <td>148.00</td>\n","      <td>148.00</td>\n","      <td>148.00</td>\n","      <td>6.47</td>\n","      <td>869506.12</td>\n","      <td>4048.61</td>\n","      <td>1440.10</td>\n","      <td>6.48</td>\n","      <td>587.79</td>\n","      <td>263.39</td>\n","      <td>3.95</td>\n","      <td>32.00</td>\n","      <td>68.00</td>\n","      <td>29.00</td>\n","      <td>38.00</td>\n","      <td>35.00</td>\n","      <td>54.00</td>\n","      <td>14.00</td>\n","      <td>26.00</td>\n","      <td>1.61</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>NaN</td>\n","      <td>16.58</td>\n","      <td>60605.00</td>\n","      <td>32.00</td>\n","      <td>NaN</td>\n","      <td>2074.00</td>\n","      <td>277500.00</td>\n","      <td>46867.73</td>\n","      <td>18.40</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>9.60</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.01</td>\n","      <td>63.06</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>6.00</td>\n","      <td>0.01</td>\n","      <td>0.00</td>\n","      <td>6.89</td>\n","      <td>102188.00</td>\n","      <td>1.49</td>\n","      <td>3.96</td>\n","      <td>3.00</td>\n","      <td>4.00</td>\n","      <td>1.00</td>\n","      <td>3.00</td>\n","      <td>5.00</td>\n","      <td>2.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","      <td>0.00</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","    <div class=\"colab-df-buttons\">\n","\n","  <div class=\"colab-df-container\">\n","    <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-6f14bea9-b21f-4e7d-b86b-c7f2fb44fd89')\"\n","            title=\"Convert this dataframe to an interactive table.\"\n","            style=\"display:none;\">\n","\n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\">\n","    <path d=\"M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z\"/>\n","  </svg>\n","    </button>\n","\n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    .colab-df-buttons div {\n","      margin-bottom: 4px;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","    <script>\n","      const buttonEl =\n","        document.querySelector('#df-6f14bea9-b21f-4e7d-b86b-c7f2fb44fd89 button.colab-df-convert');\n","      buttonEl.style.display =\n","        google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","      async function convertToInteractive(key) {\n","        const element = document.querySelector('#df-6f14bea9-b21f-4e7d-b86b-c7f2fb44fd89');\n","        const dataTable =\n","          await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                    [key], {});\n","        if (!dataTable) return;\n","\n","        const docLinkHtml = 'Like what you see? Visit the ' +\n","          '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","          + ' to learn more about interactive tables.';\n","        element.innerHTML = '';\n","        dataTable['output_type'] = 'display_data';\n","        await google.colab.output.renderOutput(dataTable, element);\n","        const docLink = document.createElement('div');\n","        docLink.innerHTML = docLinkHtml;\n","        element.appendChild(docLink);\n","      }\n","    </script>\n","  </div>\n","\n","\n","<div id=\"df-5c0c4610-80b3-413e-a6a3-971461dfb236\">\n","  <button class=\"colab-df-quickchart\" onclick=\"quickchart('df-5c0c4610-80b3-413e-a6a3-971461dfb236')\"\n","            title=\"Suggest charts\"\n","            style=\"display:none;\">\n","\n","<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","     width=\"24px\">\n","    <g>\n","        <path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z\"/>\n","    </g>\n","</svg>\n","  </button>\n","\n","<style>\n","  .colab-df-quickchart {\n","      --bg-color: #E8F0FE;\n","      --fill-color: #1967D2;\n","      --hover-bg-color: #E2EBFA;\n","      --hover-fill-color: #174EA6;\n","      --disabled-fill-color: #AAA;\n","      --disabled-bg-color: #DDD;\n","  }\n","\n","  [theme=dark] .colab-df-quickchart {\n","      --bg-color: #3B4455;\n","      --fill-color: #D2E3FC;\n","      --hover-bg-color: #434B5C;\n","      --hover-fill-color: #FFFFFF;\n","      --disabled-bg-color: #3B4455;\n","      --disabled-fill-color: #666;\n","  }\n","\n","  .colab-df-quickchart {\n","    background-color: var(--bg-color);\n","    border: none;\n","    border-radius: 50%;\n","    cursor: pointer;\n","    display: none;\n","    fill: var(--fill-color);\n","    height: 32px;\n","    padding: 0;\n","    width: 32px;\n","  }\n","\n","  .colab-df-quickchart:hover {\n","    background-color: var(--hover-bg-color);\n","    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);\n","    fill: var(--button-hover-fill-color);\n","  }\n","\n","  .colab-df-quickchart-complete:disabled,\n","  .colab-df-quickchart-complete:disabled:hover {\n","    background-color: var(--disabled-bg-color);\n","    fill: var(--disabled-fill-color);\n","    box-shadow: none;\n","  }\n","\n","  .colab-df-spinner {\n","    border: 2px solid var(--fill-color);\n","    border-color: transparent;\n","    border-bottom-color: var(--fill-color);\n","    animation:\n","      spin 1s steps(1) infinite;\n","  }\n","\n","  @keyframes spin {\n","    0% {\n","      border-color: transparent;\n","      border-bottom-color: var(--fill-color);\n","      border-left-color: var(--fill-color);\n","    }\n","    20% {\n","      border-color: transparent;\n","      border-left-color: var(--fill-color);\n","      border-top-color: var(--fill-color);\n","    }\n","    30% {\n","      border-color: transparent;\n","      border-left-color: var(--fill-color);\n","      border-top-color: var(--fill-color);\n","      border-right-color: var(--fill-color);\n","    }\n","    40% {\n","      border-color: transparent;\n","      border-right-color: var(--fill-color);\n","      border-top-color: var(--fill-color);\n","    }\n","    60% {\n","      border-color: transparent;\n","      border-right-color: var(--fill-color);\n","    }\n","    80% {\n","      border-color: transparent;\n","      border-right-color: var(--fill-color);\n","      border-bottom-color: var(--fill-color);\n","    }\n","    90% {\n","      border-color: transparent;\n","      border-bottom-color: var(--fill-color);\n","    }\n","  }\n","</style>\n","\n","  <script>\n","    async function quickchart(key) {\n","      const quickchartButtonEl =\n","        document.querySelector('#' + key + ' button');\n","      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.\n","      quickchartButtonEl.classList.add('colab-df-spinner');\n","      try {\n","        const charts = await google.colab.kernel.invokeFunction(\n","            'suggestCharts', [key], {});\n","      } catch (error) {\n","        console.error('Error during call to suggestCharts:', error);\n","      }\n","      quickchartButtonEl.classList.remove('colab-df-spinner');\n","      quickchartButtonEl.classList.add('colab-df-quickchart-complete');\n","    }\n","    (() => {\n","      let quickchartButtonEl =\n","        document.querySelector('#df-5c0c4610-80b3-413e-a6a3-971461dfb236 button');\n","      quickchartButtonEl.style.display =\n","        google.colab.kernel.accessAllowed ? 'block' : 'none';\n","    })();\n","  </script>\n","</div>\n","\n","    </div>\n","  </div>\n"],"application/vnd.google.colaboratory.intrinsic+json":{"type":"dataframe","variable_name":"housing"}},"metadata":{},"execution_count":13}],"source":["# Reload\n","\n","housing = pd.read_csv(curated +  '00061_Housing_Chicago.csv')\n","housing.drop(columns=[\"Unnamed: 0\"], inplace=True)\n","\n","housing.head()"]}],"metadata":{"colab":{"collapsed_sections":["RHW-yjPvmlI4"],"toc_visible":true,"provenance":[]},"kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"name":"python"}},"nbformat":4,"nbformat_minor":0}